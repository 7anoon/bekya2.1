var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,l=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&a(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&a(e,n,t[n]);return e},d=(e,i)=>t(e,n(i)),c=(e,t,n)=>new Promise((i,r)=>{var o=e=>{try{a(n.next(e))}catch(t){r(t)}},s=e=>{try{a(n.throw(e))}catch(t){r(t)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,s);a((n=n.apply(e,t)).next())});import{r as p,a as x,g as u,R as g,u as f,L as h,b as m,B as y,c as b,d as j,N as v}from"./react-vendor-Gq4blHEi.js";import{c as w}from"./supabase-CbUG4vy5.js";var S,_,C=(S={"assets/index-InPJLehR.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t={exports:{}},n={},i=p,r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var i,o={},a=null,l=null;for(i in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:a,ref:l,props:o,_owner:S.current}}n.Fragment=o,n.jsx=C,n.jsxs=C,t.exports=n;var k=t.exports,N={},B=x;N.createRoot=B.createRoot,N.hydrateRoot=B.hydrateRoot;const z=e=>{let t;const n=new Set,i=(e,i)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=i?i:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,o={setState:i,getState:r,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},s=t=e(i,r,o);return o};var W={exports:{}},I={},T={exports:{}},R={},D=p,P="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},A=D.useState,L=D.useEffect,E=D.useLayoutEffect,q=D.useDebugValue;function $(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!P(e,n)}catch(i){return!0}}var O="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=A({inst:{value:n,getSnapshot:t}}),r=i[0].inst,o=i[1];return E(function(){r.value=n,r.getSnapshot=t,$(r)&&o({inst:r})},[e,n,t]),L(function(){return $(r)&&o({inst:r}),e(function(){$(r)&&o({inst:r})})},[e]),q(n),n};R.useSyncExternalStore=void 0!==D.useSyncExternalStore?D.useSyncExternalStore:O,T.exports=R;var F=T.exports,H=p,G=F,M="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},U=G.useSyncExternalStore,V=H.useRef,Z=H.useEffect,Y=H.useMemo,K=H.useDebugValue;
/**
     * @license React
     * use-sync-external-store-shim/with-selector.production.js
     *
     * Copyright (c) Meta Platforms, Inc. and affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */I.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var o=V(null);if(null===o.current){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Y(function(){function e(e){if(!l){if(l=!0,o=e,e=i(e),void 0!==r&&s.hasValue){var t=s.value;if(r(t,e))return a=t}return a=e}if(t=a,M(o,e))return t;var n=i(e);return void 0!==r&&r(t,n)?(o=e,t):(o=e,a=n)}var o,a,l=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,n,i,r]);var a=U(e,o[0],o[1]);return Z(function(){s.hasValue=!0,s.value=a},[a]),K(a),a},W.exports=I;var J=W.exports;const X=u(J),Q={},{useDebugValue:ee}=g,{useSyncExternalStoreWithSelector:te}=X;let ne=!1;const ie=e=>e,re=e=>{const t="function"==typeof e?(e=>e?z(e):z)(e):e,n=(e,n)=>function(e,t=ie,n){"production"!==(Q?"production":void 0)&&n&&!ne&&(ne=!0);const i=te(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ee(i),i}(t,e,n);return Object.assign(n,t),n},oe=e=>e?re(e):re;let se=null;const ae=function(){if(se)return se;try{return se=function(){try{const t=w("your_supabase_url","your_supabase_anon_key",{auth:{storage:window.localStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"bekya-auth-token"},global:{headers:{"x-client-info":"bekya-app"}},db:{schema:"public"},realtime:{timeout:3e4}});try{t.auth.onAuthStateChange((e,t)=>{var n;null==(n=null==t?void 0:t.user)||n.id})}catch(e){}return t}catch(e){throw e}}(),se}catch(e){throw e}}(),le=oe(t=>({user:null,profile:null,error:null,isLoading:!0,setUser:e=>t({user:e}),setProfile:e=>t({profile:e}),setError:e=>t({error:e}),signUp:(n,i,r,o,s)=>c(e,null,function*(){t({error:null});try{const{data:e}=yield ae.from("profiles").select("username").eq("username",n).maybeSingle();if(e)throw new Error("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„");const{data:t,error:a}=yield ae.auth.signUp({email:i,password:r,options:{data:{username:n,location:o,phone:s}}});if(a)throw a;if(t.user){const{error:e}=yield ae.from("profiles").upsert({id:t.user.id,username:n,email:i,location:o,phone:s,role:"user"},{onConflict:"id"})}return t}catch(e){throw t({error:e.message}),e}}),signIn:(n,i)=>c(e,null,function*(){var e;t({error:null});try{const r=n.includes("@");let o=n;if(!r){const{data:e,error:t}=yield ae.from("profiles").select("email").eq("username",n).single();if(t||!e)throw new Error("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");o=e.email}const{data:s,error:a}=yield ae.auth.signInWithPassword({email:o,password:i});if(a){if(null==(e=a.message)?void 0:e.includes("Invalid"))throw new Error("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");throw new Error("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„")}if(!(null==s?void 0:s.user))throw new Error("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„");const{data:l}=yield ae.from("profiles").select("*").eq("id",s.user.id).single();return t({user:s.user,profile:l}),s}catch(r){throw t({error:r.message,isLoading:!1}),r}}),signOut:()=>c(e,null,function*(){t({error:null});try{t({user:null,profile:null});const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("sb-")&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),yield ae.auth.signOut().catch(()=>{})}catch(e){t({user:null,profile:null})}}),loadUser:()=>c(e,null,function*(){t({error:null});try{/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&(yield new Promise(e=>setTimeout(e,300)));const{data:{session:e}}=yield ae.auth.getSession();if(!(null==e?void 0:e.user))return void t({user:null,profile:null,isLoading:!1});t({user:e.user,isLoading:!1});const{data:n}=yield ae.from("profiles").select("*").eq("id",e.user.id).single();t({profile:n||{id:e.user.id,email:e.user.email,role:"user"}})}catch(e){t({user:null,profile:null,isLoading:!1})}})}));class de extends p.Component{constructor(e){var t;super(e),a(this,"symbol"!=typeof(t="handleReset")?t+"":t,()=>{this.setState({hasError:!1,error:null}),window.location.reload()}),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?k.jsx("div",{style:ce.container,children:k.jsxs("div",{style:ce.content,children:[k.jsx("div",{style:ce.icon,children:"âš ï¸"}),k.jsx("h1",{style:ce.title,children:"Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£"}),k.jsx("p",{style:ce.message,children:"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."}),k.jsx("button",{onClick:this.handleReset,style:ce.button,className:"btn btn-primary",children:"ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©"})]})}):this.props.children}}const ce={container:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},content:{textAlign:"center",padding:"40px",maxWidth:"500px"},icon:{fontSize:"80px",marginBottom:"24px"},title:{fontSize:"32px",fontWeight:"700",color:"#f9fafb",marginBottom:"16px"},message:{fontSize:"18px",color:"#d1d5db",lineHeight:"1.6",marginBottom:"32px"},button:{padding:"16px 48px",fontSize:"16px",fontWeight:"700",cursor:"pointer"}};function pe(){const[e,t]=p.useState(""),[n,i]=p.useState(""),[r,o]=p.useState(""),{signIn:s}=le(),a=f();return k.jsx("div",{style:xe.container,children:k.jsx("div",{style:xe.content,children:k.jsxs("div",{className:"card",style:xe.card,children:[k.jsxs("div",{style:xe.header,children:[k.jsx("h1",{style:xe.logo,children:"Ø¨ÙŠÙƒÙŠØ§ ðŸ›’"}),k.jsx("p",{style:xe.tagline,children:"Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù„Ø³Ù‡ Ù„ÙŠÙ‡Ø§ Ù‚ÙŠÙ…Ø©"})]}),k.jsx("h2",{style:xe.title,children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"}),r&&k.jsx("div",{style:xe.error,children:r}),k.jsxs("form",{onSubmit:t=>c(this,null,function*(){t.preventDefault(),o("");try{yield s(e,n),a("/")}catch(i){o(i.message||"Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„")}}),style:xe.form,children:[k.jsxs("div",{style:xe.field,children:[k.jsx("label",{style:xe.label,children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),k.jsx("input",{type:"text",className:"input",style:xe.input,value:e,onChange:e=>t(e.target.value),placeholder:"",autoComplete:"off",required:!0})]}),k.jsxs("div",{style:xe.field,children:[k.jsx("label",{style:xe.label,children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),k.jsx("input",{type:"password",className:"input",style:xe.input,value:n,onChange:e=>i(e.target.value),required:!0})]}),k.jsx("button",{type:"submit",className:"btn btn-primary",style:xe.button,children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]}),k.jsx("div",{style:xe.footer,children:k.jsxs("p",{style:xe.footerText,children:["Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ"," ",k.jsx(h,{to:"/signup",style:xe.link,children:"Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†"})]})})]})})})}const xe={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},content:{width:"100%",maxWidth:"450px"},card:{padding:"48px 40px"},header:{textAlign:"center",marginBottom:"40px"},logo:{fontSize:"48px",fontWeight:"900",marginBottom:"12px",background:"linear-gradient(135deg, #6b7c59 0%, #8b7355 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},tagline:{fontSize:"16px",color:"#9ca3af"},title:{fontSize:"28px",fontWeight:"700",color:"#f9fafb",marginBottom:"32px",textAlign:"center"},error:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"24px",color:"#fca5a5",fontSize:"14px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"20px"},field:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",fontWeight:"600",color:"#e5e7eb"},input:{width:"100%"},button:{width:"100%",marginTop:"8px"},footer:{marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(107, 124, 89, 0.2)",textAlign:"center"},footerText:{fontSize:"14px",color:"#9ca3af"},link:{color:"#6b7c59",fontWeight:"600",textDecoration:"none",transition:"color 0.3s ease"}};function ue(){const[e,t]=p.useState({username:"",email:"",password:"",location:"",phone:""}),[n,i]=p.useState(""),[r,o]=p.useState(!1),{signUp:s}=le();f();const a=n=>{t(d(l({},e),{[n.target.name]:n.target.value}))};return k.jsxs("div",{style:ge.container,className:"signup-container",children:[k.jsx("div",{style:ge.leftSide,className:"signup-left-side",children:k.jsxs("div",{style:ge.brandContainer,children:[k.jsx("h1",{style:ge.brandTitle,children:"Ø¨ÙŠÙƒÙŠØ§ Ø¨ØªÙ†Ø§Ø¯ÙŠÙƒ! ðŸ›’"}),k.jsx("p",{style:ge.brandSubtitle,children:"Ø§Ù†Ø¶Ù… Ù„Ù…Ø¬ØªÙ…Ø¹Ù†Ø§ Ø§Ù„ÙŠÙˆÙ…"}),k.jsxs("p",{style:ge.brandDescription,children:["Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ ÙÙŠ Ø¨ÙŠØ¹ ÙˆØ´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",k.jsx("br",{}),"Ù…Ø¹ Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ£Ø³Ù‡Ù„ Ø§Ù„Ø·Ø±Ù‚"]})]})}),k.jsxs("div",{className:"card signup-card",style:ge.card,children:[k.jsx("div",{className:"mobile-brand-header",children:k.jsx("h1",{style:ge.mobileBrandTitle,children:"Ø¨ÙŠÙƒÙŠØ§ Ø¨ØªÙ†Ø§Ø¯ÙŠÙƒ! ðŸ›’"})}),k.jsx("h1",{style:ge.title,className:"signup-title",children:"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯"}),n&&k.jsx("div",{style:ge.error,children:n}),k.jsxs("form",{onSubmit:t=>c(this,null,function*(){t.preventDefault(),i(""),o(!0);try{yield s(e.username,e.email,e.password,e.location,e.phone),setTimeout(()=>{window.location.href="/bekya2.1/#/"},500)}catch(n){i(n.message||"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„")}finally{o(!1)}}),style:ge.form,children:[k.jsxs("div",{style:ge.field,children:[k.jsx("label",{style:ge.label,children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),k.jsx("input",{type:"text",name:"username",className:"input",value:e.username,onChange:a,required:!0})]}),k.jsxs("div",{style:ge.field,children:[k.jsx("label",{style:ge.label,children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),k.jsx("input",{type:"email",name:"email",className:"input",value:e.email,onChange:a,required:!0})]}),k.jsxs("div",{style:ge.field,children:[k.jsx("label",{style:ge.label,children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),k.jsx("input",{type:"password",name:"password",className:"input",value:e.password,onChange:a,required:!0,minLength:6})]}),k.jsxs("div",{style:ge.field,children:[k.jsx("label",{style:ge.label,children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ / Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"}),k.jsx("input",{type:"text",name:"location",className:"input",value:e.location,onChange:a,placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© - Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±",required:!0})]}),k.jsxs("div",{style:ge.field,children:[k.jsx("label",{style:ge.label,children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),k.jsx("input",{type:"tel",name:"phone",className:"input",value:e.phone,onChange:a,required:!0})]}),k.jsx("button",{type:"submit",className:"btn btn-primary",style:ge.submitBtn,disabled:r,children:r?"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...":"ØªØ³Ø¬ÙŠÙ„"})]}),k.jsxs("p",{style:ge.footer,children:["Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ ",k.jsx(h,{to:"/login",style:ge.link,children:"Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„"})]})]})]})}const ge={container:{minHeight:"100vh",display:"flex",justifyContent:"flex-end",alignItems:"stretch",padding:"0"},leftSide:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"60px"},brandContainer:{maxWidth:"600px"},brandTitle:{fontSize:"72px !important",fontWeight:"900 !important",color:"#000000 !important",marginBottom:"20px",textShadow:"none !important",fontFamily:"'Cairo', 'Segoe UI', sans-serif",lineHeight:"1.2",WebkitTextFillColor:"#000000"},brandSubtitle:{fontSize:"32px",color:"#1a1a1a",marginBottom:"16px",fontWeight:"700"},brandDescription:{fontSize:"22px",color:"#2d2d2d",lineHeight:"1.8",fontWeight:"500"},card:{maxWidth:"550px",width:"100%",minHeight:"100vh",padding:"60px 50px",borderRadius:"0",display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"auto"},title:{fontSize:"28px",marginBottom:"24px",textAlign:"center",color:"#10b981"},error:{background:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"16px"},field:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontWeight:"600",color:"#374151"},submitBtn:{width:"100%",marginTop:"8px"},footer:{marginTop:"20px",textAlign:"center",color:"#6b7280"},link:{color:"#10b981",fontWeight:"600",textDecoration:"none"},mobileBrandTitle:{fontSize:"36px",fontWeight:"900",color:"#000000",textAlign:"center",marginBottom:"0",display:"none"}};if("undefined"!=typeof window){const e=document.createElement("style");e.textContent="\n    .mobile-brand-header {\n      display: none;\n    }\n    \n    @media (max-width: 768px) {\n      .signup-container {\n        flex-direction: column !important;\n        padding: 0 !important;\n      }\n      \n      .signup-left-side {\n        display: none !important;\n      }\n      \n      .mobile-brand-header {\n        display: block !important;\n        background: linear-gradient(135deg, #1e4d3d 0%, #2d6a4f 50%, #40916c 100%);\n        padding: 40px 20px;\n        margin: -30px -20px 30px -20px;\n        border-radius: 16px 16px 0 0;\n      }\n      \n      .mobile-brand-header h1 {\n        display: block !important;\n        color: #ffffff !important;\n        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);\n      }\n      \n      .signup-card {\n        max-width: 100% !important;\n        min-height: auto !important;\n        padding: 30px 20px !important;\n        border-radius: 16px !important;\n        margin: 20px;\n      }\n      \n      .signup-title {\n        font-size: 24px !important;\n      }\n    }\n    \n    @media (max-width: 480px) {\n      .mobile-brand-header {\n        padding: 30px 16px;\n        margin: -20px -16px 20px -16px;\n      }\n      \n      .mobile-brand-header h1 {\n        font-size: 28px !important;\n      }\n      \n      .signup-card {\n        padding: 20px 16px !important;\n        margin: 16px;\n      }\n      \n      .signup-title {\n        font-size: 22px !important;\n      }\n    }\n  ",document.head.appendChild(e)}const fe=new class{constructor(){this.cache=new Map,this.maxAge=3e5}generateKey(e,t={}){const n=Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{});return`${e}_${JSON.stringify(n)}`}set(e,t,n=this.maxAge){const i={data:t,timestamp:Date.now(),expiresAt:Date.now()+n};this.cache.set(e,i)}get(e){const t=this.cache.get(e);return t?Date.now()>t.expiresAt?(this.cache.delete(e),null):t.data:null}hasValid(e){const t=this.cache.get(e);return t&&Date.now()<=t.expiresAt}cleanup(){const e=Date.now();for(const[t,n]of this.cache.entries())e>n.expiresAt&&this.cache.delete(t)}clear(){this.cache.clear()}getStats(){const e=Date.now();let t=0,n=0;for(const i of this.cache.values())e<=i.expiresAt?t++:n++;return{total:this.cache.size,valid:t,expired:n,hitRate:t+n>0?(t/(t+n)*100).toFixed(1)+"%":"0%"}}};setInterval(()=>{fe.cleanup()},6e5);const he=oe((t,n)=>({products:[],loading:!1,analyzeProduct:(t,n,i,r,o="",s="")=>c(e,null,function*(){const e=(o+" "+s).toLowerCase().trim(),t=parseInt(r),n={"Ù…Ù…ØªØ§Ø²Ø©":["Ø¬Ø¯ÙŠØ¯","Ø´Ø¨Ù‡ Ø¬Ø¯ÙŠØ¯","Ù…Ù…ØªØ§Ø²","Ø²ÙŠØ±Ùˆ","Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø®ÙÙŠÙ","Ù†Ø¸ÙŠÙ Ø¬Ø¯Ø§","Ø¨Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯","Ù„Ù… ÙŠØ³ØªØ®Ø¯Ù…"],"Ø¬ÙŠØ¯Ø© Ø¬Ø¯Ø§Ù‹":["Ø¬ÙŠØ¯ Ø¬Ø¯Ø§","Ø­Ø§Ù„Ø© Ø¬ÙŠØ¯Ø© Ø¬Ø¯Ø§","Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø¨Ø³ÙŠØ·","Ù†Ø¸ÙŠÙ","Ø´Ø¨Ù‡ Ø¬Ø¯ÙŠØ¯"],"Ø¬ÙŠØ¯Ø©":["Ø¬ÙŠØ¯","Ø­Ø§Ù„Ø© Ø¬ÙŠØ¯Ø©","Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø¹Ø§Ø¯ÙŠ","Ù…Ø³ØªØ¹Ù…Ù„","Ù†Ø¸ÙŠÙ"],"Ù…ØªÙˆØ³Ø·Ø©":["Ù…ØªÙˆØ³Ø·","Ø­Ø§Ù„Ø© Ù…ØªÙˆØ³Ø·Ø©","Ø§Ø³ØªØ¹Ù…Ø§Ù„ ÙƒØ«ÙŠØ±","Ø¨Ù‡ Ø®Ø¯ÙˆØ´","Ø¨Ù‡ Ø¹ÙŠÙˆØ¨ Ø¨Ø³ÙŠØ·Ø©"],"Ù…Ù‚Ø¨ÙˆÙ„Ø©":["Ù…Ù‚Ø¨ÙˆÙ„","Ø­Ø§Ù„Ø© Ù…Ù‚Ø¨ÙˆÙ„Ø©","ÙŠØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©","Ø¨Ù‡ Ø¹ÙŠÙˆØ¨","Ù‚Ø¯ÙŠÙ…","Ù…ØªÙ‡Ø§Ù„Ùƒ"]},a={"Ù…Ù…ØªØ§Ø²Ø©":{discount:.2,description:"Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø­Ø§Ù„Ø© Ù…Ù…ØªØ§Ø²Ø©ØŒ Ø´Ø¨Ù‡ Ø¬Ø¯ÙŠØ¯"},"Ø¬ÙŠØ¯Ø© Ø¬Ø¯Ø§Ù‹":{discount:.35,description:"Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø­Ø§Ù„Ø© Ø¬ÙŠØ¯Ø© Ø¬Ø¯Ø§Ù‹ Ù…Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙÙŠÙ"},"Ø¬ÙŠØ¯Ø©":{discount:.5,description:"Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø­Ø§Ù„Ø© Ø¬ÙŠØ¯Ø© Ù…Ø¹ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¶Ø­Ø©"},"Ù…ØªÙˆØ³Ø·Ø©":{discount:.65,description:"Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø­Ø§Ù„Ø© Ù…ØªÙˆØ³Ø·Ø© Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„Ø¹ÙŠÙˆØ¨"},"Ù…Ù‚Ø¨ÙˆÙ„Ø©":{discount:.75,description:"Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø­Ø§Ù„Ø© Ù…Ù‚Ø¨ÙˆÙ„Ø© Ù…Ø¹ Ø¹ÙŠÙˆØ¨ ÙˆØ§Ø¶Ø­Ø©"}};let d=null;for(const[i,r]of Object.entries(n)){for(const t of r)if(e.includes(t)){d=l({name:i},a[i]);break}if(d)break}if(!d){const e={electronics:"Ø¬ÙŠØ¯Ø©",furniture:"Ø¬ÙŠØ¯Ø© Ø¬Ø¯Ø§Ù‹",books:"Ø¬ÙŠØ¯Ø©",clothes:"Ù…ØªÙˆØ³Ø·Ø©",toys:"Ø¬ÙŠØ¯Ø©",other:"Ø¬ÙŠØ¯Ø©"}[i]||"Ø¬ÙŠØ¯Ø©";d=l({name:e},a[e])}let c=Math.round(t*(1-d.discount));const p={electronics:.9,furniture:1,books:.7,clothes:.6,toys:.7,other:.8}[i]||.8;c=Math.round(c*p);const x=Math.min(c,500),u=Math.round((t-x)/t*100),g={furniture:!0,toys:!0,other:!0,electronics:!1,clothes:!1,books:!1}[i]||!1,f=g?((e,t,n)=>{const i=(t+" "+n).toLowerCase(),r={"ÙƒØ±Ø³ÙŠ|chair|seat":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ø­Ø§Ù…Ù„ Ù†Ø¨Ø§ØªØ§Øª Ø£Ùˆ ÙƒØ±Ø³ÙŠ Ø¯ÙŠÙƒÙˆØ± Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø§Ø¡","Ø·Ø§ÙˆÙ„Ø©|table|desk":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ø±Ù Ø­Ø§Ø¦Ø· Ø£Ùˆ Ø·Ø§ÙˆÙ„Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¹ØµØ±ÙŠØ©","Ø¯ÙˆÙ„Ø§Ø¨|Ø®Ø²Ø§Ù†Ø©|wardrobe|cabinet":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ù…ÙƒØªØ¨Ø© ÙƒØªØ¨ Ø£Ùˆ ÙˆØ­Ø¯Ø© ØªØ®Ø²ÙŠÙ† Ù„Ù„Ø£Ø¯ÙˆØ§Øª","Ø³Ø±ÙŠØ±|bed|mattress":"ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥Ø·Ø§Ø± ÙƒÙ‚Ø§Ø¹Ø¯Ø© Ù„Ø£Ø±ÙŠÙƒØ© Ø£Ùˆ ØµÙˆÙØ§","Ø±Ù|shelf":"ÙŠÙ…ÙƒÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø·Ù„Ø§Ø¦Ù‡ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙƒØ¯ÙŠÙƒÙˆØ± Ø­Ø§Ø¦Ø· Ø£Ùˆ Ù…Ù†Ø¸Ù…","Ù…Ø±Ø¢Ø©|mirror":"ÙŠÙ…ÙƒÙ† ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø·Ø§Ø± ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒÙ‚Ø·Ø¹Ø© Ø¯ÙŠÙƒÙˆØ± ÙÙ†ÙŠØ©","Ø³Ø¬Ø§Ø¯Ø©|carpet|rug":"ÙŠÙ…ÙƒÙ† Ù‚ØµÙ‡Ø§ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒÙ…Ù…Ø³Ø­Ø© Ø£Ùˆ ÙØ±Ø´ ØµØºÙŠØ±","Ø¯Ù…ÙŠØ©|Ø¯Ø¨Ø¯ÙˆØ¨|teddy|doll":"ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒØ¯ÙŠÙƒÙˆØ± Ù„ØºØ±ÙØ© Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø£Ùˆ Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§","Ù„Ø¹Ø¨Ø©|toy|game":"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§ Ù„Ø¯ÙˆØ± Ø§Ù„Ø£ÙŠØªØ§Ù… Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ø§Ù„Ø­Ø¶Ø§Ù†Ø§Øª","Ø¹Ø±Ø¨ÙŠØ©|Ø³ÙŠØ§Ø±Ø© Ù„Ø¹Ø¨Ø©|car toy":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ù‚Ø·Ø¹Ø© Ø¯ÙŠÙƒÙˆØ± Ø£Ùˆ Ø­Ø§Ù…Ù„ Ø£Ù‚Ù„Ø§Ù… Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ","Ø¨Ø§Ø²Ù„|puzzle":"ÙŠÙ…ÙƒÙ† ØªØ£Ø·ÙŠØ± Ø§Ù„Ù‚Ø·Ø¹ ÙˆØ¹Ù…Ù„ Ù„ÙˆØ­Ø© ÙÙ†ÙŠØ© Ù„Ù„Ø­Ø§Ø¦Ø·","ÙƒØªØ§Ø¨|book|Ù…Ø¬Ù„Ø©|magazine":"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§ Ù„Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙØ­Ø§Øª ÙÙŠ Ø£Ø¹Ù…Ø§Ù„ ÙÙ†ÙŠØ©","Ù‚ØµØ©|story|Ø±ÙˆØ§ÙŠØ©|novel":"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§ Ù„Ù„Ù…Ø¯Ø§Ø±Ø³ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙƒØªØ¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ© ÙÙŠ Ø§Ù„Ø­ÙŠ","Ù‚Ù…ÙŠØµ|shirt|blouse":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ ÙˆØ³Ø§Ø¯Ø© Ø£Ùˆ Ø­Ù‚ÙŠØ¨Ø© Ù‚Ù…Ø§Ø´","Ø¨Ù†Ø·Ù„ÙˆÙ†|pants|jeans":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ø­Ù‚ÙŠØ¨Ø© Ø¬ÙŠÙ†Ø² Ø¹ØµØ±ÙŠØ© Ø£Ùˆ Ù…ÙØ±Ø´","ÙØ³ØªØ§Ù†|dress":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ù…Ù„Ø§Ø¨Ø³ Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø£Ùˆ ÙˆØ³Ø§Ø¦Ø¯ Ø¯ÙŠÙƒÙˆØ±","Ø¬Ø§ÙƒÙŠØª|jacket|Ù…Ø¹Ø·Ù|coat":"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡ Ø£Ùˆ ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ø¨Ø·Ø§Ù†ÙŠØ© ØµØºÙŠØ±Ø©","Ø´Ø§Ø­Ù†|charger|ÙƒØ§Ø¨Ù„|cable":"ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ©","Ø³Ù…Ø§Ø¹Ø©|headphone|earphone":"ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø·Ø¹ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ DIY Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©","ØµÙ†Ø¯ÙˆÙ‚|box|Ø¹Ù„Ø¨Ø©":"ÙŠÙ…ÙƒÙ† ØªØ²ÙŠÙŠÙ†Ù‡ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙƒØµÙ†Ø¯ÙˆÙ‚ ØªØ®Ø²ÙŠÙ† Ø£Ù†ÙŠÙ‚","Ø¥Ø·Ø§Ø±|frame":"ÙŠÙ…ÙƒÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø·Ù„Ø§Ø¦Ù‡ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù„ØµÙˆØ± Ø£Ùˆ Ù…Ø±Ø§ÙŠØ§ Ø¬Ø¯ÙŠØ¯Ø©","Ø²Ø¬Ø§Ø¬|glass|Ø¨Ø±Ø·Ù…Ø§Ù†|jar":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ Ù…Ø²Ù‡Ø±ÙŠØ© Ø£Ùˆ Ø­Ø§Ù…Ù„ Ø´Ù…ÙˆØ¹ Ø¯ÙŠÙƒÙˆØ±ÙŠ","Ø³Ù„Ø©|basket":"ÙŠÙ…ÙƒÙ† ØªØ²ÙŠÙŠÙ†Ù‡Ø§ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒÙ…Ù†Ø¸Ù… Ù„Ù„Ø£Ø¯ÙˆØ§Øª Ø£Ùˆ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª","ÙˆØ³Ø§Ø¯Ø©|pillow|cushion":"ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ø§Ù„ØºØ·Ø§Ø¡ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒØ¯ÙŠÙƒÙˆØ± Ø¬Ø¯ÙŠØ¯","Ø³ØªØ§Ø±Ø©|curtain":"ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ ØºØ·Ø§Ø¡ Ø·Ø§ÙˆÙ„Ø© Ø£Ùˆ ÙˆØ³Ø§Ø¦Ø¯","Ø³Ø¬Ø§Ø¯Ø©|mat":"ÙŠÙ…ÙƒÙ† Ù‚ØµÙ‡Ø§ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒÙ…Ù…Ø³Ø­Ø© Ø£Ùˆ ÙØ±Ø´ Ù„Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ø£Ù„ÙŠÙØ©"};for(const[s,a]of Object.entries(r)){const e=s.split("|");for(const t of e)if(i.includes(t))return a}const o={furniture:"ÙŠÙ…ÙƒÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø·Ù„Ø§Ø¦Ù‡Ø§ ÙˆØªØ¬Ø¯ÙŠØ¯Ù‡Ø§ Ù„ØªØµØ¨Ø­ Ù‚Ø·Ø¹Ø© Ø¯ÙŠÙƒÙˆØ± Ø¹ØµØ±ÙŠØ©",toys:"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§ Ù„Ø¯ÙˆØ± Ø§Ù„Ø£ÙŠØªØ§Ù… Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ø§Ù„Ø­Ø¶Ø§Ù†Ø§Øª",books:"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§ Ù„Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø£Ùˆ Ø§Ù„Ù…Ø¯Ø§Ø±Ø³",clothes:"ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§ Ø£Ùˆ ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ù‚Ø·Ø¹ Ù‚Ù…Ø§Ø´ÙŠØ© Ù…ÙÙŠØ¯Ø©",electronics:"ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø·Ø¹ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¯ÙˆÙŠØ±Ù‡Ø§ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†",other:"ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ DIY Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ø£Ùˆ Ø§Ù„ØªØ¨Ø±Ø¹ Ø¨Ù‡Ø§"};return o[e]||o.other})(i,o,s):null;return{condition:d.name,canRecycle:g,suggestedPrice:x,originalPrice:t,discountPercentage:u,recycleIdea:f,reasoning:d.description}}),createProduct:(t,n,i)=>c(e,null,function*(){try{const{data:e,error:r}=yield ae.from("products").insert(d(l({},t),{images:n,condition:i.condition,original_price:i.originalPrice,suggested_price:i.suggestedPrice,discount_percentage:i.discountPercentage,can_recycle:i.canRecycle,recycle_idea:i.recycleIdea,status:"pending"})).select().single();if(r)throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬: ${r.message}`);return e}catch(e){throw e}}),approveProduct:(t,i)=>c(e,null,function*(){const{data:e,error:r}=yield ae.from("products").update({status:"approved",final_price:i,approved_at:(new Date).toISOString()}).eq("id",t).select().single();if(r)throw r;return yield ae.from("notifications").insert({user_id:e.user_id,product_id:t,message:`ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ùƒ "${e.title}" Ø¨Ø³Ø¹Ø± ${i} Ø¬Ù†ÙŠÙ‡`,type:"product_approved"}),yield n().sendLocationNotifications(e),e}),rejectProduct:(t,n)=>c(e,null,function*(){const{data:e,error:i}=yield ae.from("products").update({status:"rejected",rejection_reason:n}).eq("id",t).select().single();if(i)throw i;return yield ae.from("notifications").insert({user_id:e.user_id,product_id:t,message:`ØªÙ… Ø±ÙØ¶ Ù…Ù†ØªØ¬Ùƒ "${e.title}". Ø§Ù„Ø³Ø¨Ø¨: ${n}`,type:"product_rejected"}),e}),negotiateProduct:(t,n,i)=>c(e,null,function*(){const{data:e,error:r}=yield ae.from("products").update({status:"awaiting_seller",negotiated_price:n,negotiation_note:i,seller_rejected_negotiation:!1}).eq("id",t).select().single();if(r)throw r;const o=i?` - ${i}`:"";return yield ae.from("notifications").insert({user_id:e.user_id,product_id:t,message:`Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ø¬Ø¯ÙŠØ¯ Ù„Ù…Ù†ØªØ¬Ùƒ "${e.title}": ${n} Ø¬Ù†ÙŠÙ‡${o}`,type:"price_negotiation"}),e}),acceptNegotiation:t=>c(e,null,function*(){const{data:e}=yield ae.from("products").select("negotiated_price, title, user_id").eq("id",t).single(),{data:n,error:i}=yield ae.from("products").update({status:"pending",final_price:e.negotiated_price,negotiation_note:"Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚ - ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚Ø© Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}).eq("id",t).select().single();if(i)throw i;const{data:r}=yield ae.from("profiles").select("id").eq("role","admin");if(r&&r.length>0){const n=r.map(n=>({user_id:n.id,product_id:t,message:`âœ… Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¶! Ø§Ù„Ù…Ù†ØªØ¬ "${e.title}" Ø¨Ø³Ø¹Ø± ${e.negotiated_price} Ø¬Ù†ÙŠÙ‡ - ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù„Ù†Ø´Ø±`,type:"offer"}));yield ae.from("notifications").insert(n)}return n}),rejectNegotiation:t=>c(e,null,function*(){const{data:e}=yield ae.from("products").select("*, profiles(username, phone)").eq("id",t).single(),{data:n,error:i}=yield ae.from("products").update({status:"pending",seller_rejected_negotiation:!0,negotiated_price:null,negotiation_note:"Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø±ÙØ¶ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø§Ø¨Ù‚ - ÙŠØ­ØªØ§Ø¬ ØªÙØ§ÙˆØ¶ Ø¬Ø¯ÙŠØ¯"}).eq("id",t).select().single();if(i)throw i;const{data:r}=yield ae.from("profiles").select("id").eq("role","admin");if(r&&r.length>0){const n=r.map(n=>({user_id:n.id,product_id:t,message:`Ø§Ù„Ø¨Ø§Ø¦Ø¹ ${e.profiles.username} Ø±ÙØ¶ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ÙˆØ¶ ÙˆÙŠØ­ØªØ§Ø¬ ØªÙØ§ÙˆØ¶ Ø¬Ø¯ÙŠØ¯. Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†: ${e.profiles.phone}`,type:"negotiation_rejected"}));yield ae.from("notifications").insert(n)}return n}),sendLocationNotifications:t=>c(e,null,function*(){const{data:e}=yield ae.from("profiles").select("location").eq("id",t.user_id).single();if(!e)return;const{data:n}=yield ae.from("profiles").select("id, username").eq("location",e.location).neq("id",t.user_id);if(n&&n.length>0){const e=n.map(e=>({user_id:e.id,product_id:t.id,message:`Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ Ù…ØªØ§Ø­ ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ: ${t.title}`,type:"new_product"}));yield ae.from("notifications").insert(e)}}),fetchProducts:(n=null,i=1,r=20)=>c(e,null,function*(){t({loading:!0});try{const e=`products_${n||"all"}_page_${i}`,o=fe.get(e);if(o)return t({products:o.data,loading:!1,totalPages:o.totalPages,currentPage:i,totalItems:o.count}),o;const s=new AbortController,a=setTimeout(()=>s.abort(),3e4);let l=ae.from("products").select("*, profiles(username, location)",{count:"exact"}).eq("status","approved").order("created_at",{ascending:!1}).range((i-1)*r,i*r-1);n&&(l=l.eq("profiles.location",n));const{data:d,error:c,count:p}=yield l;if(clearTimeout(a),c)throw t({loading:!1}),c;const x={data:d||[],count:p,totalPages:Math.ceil(p/r)};return fe.set(e,x),t({products:d||[],loading:!1,totalPages:Math.ceil(p/r),currentPage:i,totalItems:p}),x}catch(e){if(t({loading:!1}),"AbortError"===e.name||e.message.includes("timeout"))throw new Error("Request timed out. Please try again.");throw e}}),fetchUserProducts:t=>c(e,null,function*(){const e=`user_products_${t}`,n=fe.get(e);if(n)return n;const i=new AbortController,r=setTimeout(()=>i.abort(),3e4);try{const{data:n,error:i}=yield ae.from("products").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(clearTimeout(r),i)throw i;return fe.set(e,n,18e4),n}catch(o){if("AbortError"===o.name||o.message.includes("timeout"))throw new Error("Request timed out. Please try again.");throw o}}),fetchPendingProducts:()=>c(e,null,function*(){try{const{data:e,error:t}=yield ae.from("products").select("*, profiles(username, email, phone, location)").eq("status","pending").order("created_at",{ascending:!1});if(null==e||e.length,t)throw t;return e||[]}catch(e){return function(e){e&&e.name}(e),[]}})}));function me({images:e,initialIndex:t=0,onClose:n}){const[i,r]=p.useState(t),o=()=>{r(t=>(t+1)%e.length)},s=()=>{r(t=>(t-1+e.length)%e.length)};return k.jsxs("div",{style:ye.overlay,onClick:n,onKeyDown:e=>{"Escape"===e.key&&n(),"ArrowRight"===e.key&&s(),"ArrowLeft"===e.key&&o()},tabIndex:0,children:[k.jsx("button",{className:"lightbox-close-btn",style:ye.closeBtn,onClick:n,children:"âœ•"}),k.jsxs("div",{style:ye.content,onClick:e=>e.stopPropagation(),children:[k.jsx("img",{src:e[i],alt:`ØµÙˆØ±Ø© ${i+1}`,style:ye.image,className:"lightbox-image",onError:e=>{e.target.src="https://placehold.co/600x400/e2e8f0/64748b?text=Image+Load+Failed"}}),e.length>1&&k.jsxs(k.Fragment,{children:[k.jsx("button",{className:"lightbox-nav-btn",style:l(l({},ye.navBtn),ye.prevBtn),onClick:s,children:"â®"}),k.jsx("button",{className:"lightbox-nav-btn",style:l(l({},ye.navBtn),ye.nextBtn),onClick:o,children:"â¯"}),k.jsxs("div",{className:"lightbox-counter",style:ye.counter,children:[i+1," / ",e.length]})]})]})]})}const ye={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(10, 14, 39, 0.98) 100%)",backdropFilter:"blur(20px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,cursor:"pointer",animation:"fadeIn 0.4s ease",padding:"20px"},content:{position:"relative",maxWidth:"95vw",maxHeight:"95vh",cursor:"default",animation:"zoomIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",display:"flex",alignItems:"center",justifyContent:"center"},image:{maxWidth:"100%",maxHeight:"90vh",width:"auto",height:"auto",objectFit:"contain",borderRadius:"20px",boxShadow:"0 30px 90px rgba(0, 0, 0, 0.8), 0 0 60px rgba(107, 124, 89, 0.3)",border:"3px solid rgba(107, 124, 89, 0.3)",transition:"transform 0.3s ease"},closeBtn:{position:"fixed",top:"30px",right:"30px",background:"linear-gradient(135deg, rgba(107, 124, 89, 0.9) 0%, rgba(85, 107, 47, 0.9) 100%)",border:"none",borderRadius:"50%",width:"56px",height:"56px",fontSize:"28px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,transition:"all 0.3s ease",boxShadow:"0 8px 25px rgba(107, 124, 89, 0.5)",fontWeight:"300"},navBtn:{position:"absolute",top:"50%",transform:"translateY(-50%)",background:"linear-gradient(135deg, rgba(107, 124, 89, 0.9) 0%, rgba(85, 107, 47, 0.9) 100%)",border:"none",borderRadius:"50%",width:"64px",height:"64px",fontSize:"32px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",boxShadow:"0 8px 25px rgba(107, 124, 89, 0.5)",fontWeight:"700",zIndex:10001},prevBtn:{right:"-80px"},nextBtn:{left:"-80px"},counter:{position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, rgba(107, 124, 89, 0.95) 0%, rgba(85, 107, 47, 0.95) 100%)",backdropFilter:"blur(10px)",padding:"12px 32px",borderRadius:"30px",fontSize:"16px",fontWeight:"700",color:"white",boxShadow:"0 8px 25px rgba(107, 124, 89, 0.5)",border:"2px solid rgba(107, 124, 89, 0.3)",zIndex:1e4}};function be({product:e}){var t,n;const[i,r]=p.useState(!1),o=f();return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"card netflix-spotlight netflix-lift",style:je.card,onClick:()=>{o(`/product/${e.id}`)},children:[k.jsxs("div",{style:je.imageContainer,onClick:e=>{e.stopPropagation(),r(!0)},children:[k.jsx("img",{src:e.images[0],alt:e.title,style:je.image,loading:"lazy",onError:e=>{e.target.src="https://placehold.co/300x200/e2e8f0/64748b?text=Image+Not+Found"}}),e.images.length>1&&k.jsxs("div",{style:je.imageCount,className:"netflix-badge",children:["ðŸ“· ",e.images.length]}),e.active_offer&&k.jsxs("div",{style:je.offerOverlay,className:"netflix-badge",children:["ðŸ”¥ Ø®ØµÙ… ",e.active_offer.discount_percentage,"%"]})]}),k.jsxs("div",{style:je.content,children:[k.jsx("h3",{style:je.title,children:e.title}),k.jsx("p",{style:je.description,children:e.description}),k.jsxs("div",{style:je.details,children:[k.jsx("div",{style:je.priceContainer,children:e.active_offer?k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:je.offerBadge,children:["ðŸŽ‰ Ø®ØµÙ… ",e.active_offer.discount_percentage,"%"]}),k.jsxs("div",{style:je.priceWithDiscount,children:[k.jsxs("span",{style:je.oldPrice,children:[e.original_final_price," Ø¬Ù†ÙŠÙ‡"]}),k.jsxs("span",{style:je.newPrice,children:[e.final_price," Ø¬Ù†ÙŠÙ‡"]})]})]}):k.jsxs("span",{style:je.price,children:[e.final_price," Ø¬Ù†ÙŠÙ‡"]})}),k.jsx("span",{style:je.condition,children:e.condition})]}),k.jsxs("div",{style:je.seller,children:[k.jsxs("span",{children:["Ø§Ù„Ø¨Ø§Ø¦Ø¹: ",null==(t=e.profiles)?void 0:t.username]}),k.jsxs("span",{children:["ðŸ“ ",null==(n=e.profiles)?void 0:n.location]})]})]})]}),i&&k.jsx(me,{images:e.images,onClose:()=>r(!1)})]})}const je={card:{overflow:"hidden",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",animation:"fadeInUp 0.6s ease-out",position:"relative"},imageContainer:{width:"100%",height:"320px",overflow:"hidden",background:"linear-gradient(135deg, #1a1f2e 0%, #2d3748 100%)",position:"relative",cursor:"pointer"},image:{width:"100%",height:"100%",objectFit:"cover",transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",filter:"brightness(0.9) contrast(1.1) saturate(1.2)"},imageCount:{position:"absolute",top:"16px",right:"16px",zIndex:2},offerOverlay:{position:"absolute",top:"16px",left:"16px",zIndex:2,animation:"badge-pulse 2s ease-in-out infinite"},content:{padding:"32px",position:"relative",zIndex:1},title:{fontSize:"24px",fontWeight:"800",marginBottom:"14px",color:"#f9fafb",lineHeight:"1.3",letterSpacing:"-0.5px",textShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},description:{color:"#d1d5db",fontSize:"15px",marginBottom:"24px",lineHeight:"1.7",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},details:{display:"flex",flexDirection:"column",gap:"16px",marginBottom:"24px"},priceContainer:{display:"flex",flexDirection:"column",gap:"12px"},offerBadge:{background:"linear-gradient(135deg, #8b7355 0%, #6d5a42 100%)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"13px",fontWeight:"700",alignSelf:"flex-start",boxShadow:"0 4px 12px rgba(139, 115, 85, 0.4), 0 0 20px rgba(139, 115, 85, 0.2)",animation:"pulse 2s ease-in-out infinite",textTransform:"uppercase",letterSpacing:"0.5px"},priceWithDiscount:{display:"flex",alignItems:"center",gap:"14px"},oldPrice:{fontSize:"18px",color:"#6b7280",textDecoration:"line-through",fontWeight:"500"},newPrice:{fontSize:"32px",fontWeight:"900",background:"linear-gradient(135deg, #6b7c59 0%, #8b7355 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-1px",textShadow:"0 0 20px rgba(107, 124, 89, 0.5)"},price:{fontSize:"30px",fontWeight:"900",background:"linear-gradient(135deg, #6b7c59 0%, #8b7355 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-1px"},condition:{background:"rgba(107, 124, 89, 0.2)",color:"#a7f3d0",padding:"8px 18px",borderRadius:"20px",fontSize:"13px",fontWeight:"700",alignSelf:"flex-start",border:"1px solid rgba(107, 124, 89, 0.3)",boxShadow:"0 2px 8px rgba(107, 124, 89, 0.2)",textTransform:"uppercase",letterSpacing:"0.5px"},seller:{display:"flex",justifyContent:"space-between",fontSize:"13px",color:"#9ca3af",paddingTop:"24px",borderTop:"2px solid rgba(107, 124, 89, 0.15)",fontWeight:"600"}};function ve(){const e=f(),[t,n]=p.useState([]),[i,r]=p.useState(0),{fetchProducts:o}=he(),{profile:s}=le();p.useEffect(()=>{l(),a()},[]);const a=()=>c(this,null,function*(){try{const e=(yield o(null==s?void 0:s.location)).filter(e=>!e.choice_type||"sell"===e.choice_type);r(e.length)}catch(e){}}),l=()=>c(this,null,function*(){try{let e=ae.from("offers").select("*").eq("is_active",!0).order("created_at",{ascending:!1});const{data:t,error:i}=yield e;if(i)throw i;const r=(null==t?void 0:t.filter(e=>!e.target_location||e.target_location===(null==s?void 0:s.location)))||[];n(r)}catch(e){}});return k.jsxs("div",{className:"container",children:[k.jsxs("div",{className:"netflix-hero",style:we.heroSection,children:[k.jsxs("div",{style:we.heroContent,children:[k.jsx("h1",{style:we.heroTitle,className:"netflix-shimmer",children:"ðŸ›’ Ø¨ÙŠÙƒÙŠØ§"}),k.jsx("p",{style:we.heroSubtitle,children:"Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù„Ø³Ù‡ Ù„ÙŠÙ‡Ø§ Ù‚ÙŠÙ…Ø©"}),k.jsx("p",{style:we.heroDescription,children:"Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©"}),k.jsxs("div",{style:we.heroButtons,children:[k.jsx("button",{className:"morph-button",onClick:()=>e("/add-product"),children:"ðŸŽ¯ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ù†"}),k.jsx("button",{className:"morph-button",style:{background:"linear-gradient(135deg, #8b7355 0%, #6d5a42 100%)"},onClick:()=>e("/browse"),children:"ðŸ” ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"})]})]}),k.jsxs("div",{style:we.statsRow,children:[k.jsxs("div",{className:"stats-card",style:we.statCard,children:[k.jsx("div",{className:"icon-3d",children:"ðŸ“¦"}),k.jsxs("div",{className:"stats-number",children:[i,"+"]}),k.jsx("div",{className:"stats-label",children:"Ù…Ù†ØªØ¬ Ù…ØªØ§Ø­"})]}),k.jsxs("div",{className:"stats-card",style:we.statCard,children:[k.jsx("div",{className:"icon-3d",children:"âœ…"}),k.jsx("div",{className:"stats-number",children:"500+"}),k.jsx("div",{className:"stats-label",children:"Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹"})]}),k.jsxs("div",{className:"stats-card",style:we.statCard,children:[k.jsx("div",{className:"icon-3d",children:"â­"}),k.jsx("div",{className:"stats-number",children:"4.8"}),k.jsx("div",{className:"stats-label",children:"ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})]})]}),k.jsx("div",{className:"glow-divider"}),k.jsxs("div",{style:we.categoriesSection,children:[k.jsxs("h2",{style:we.sectionTitle,children:[k.jsx("span",{className:"icon-3d",style:{marginLeft:"16px"},children:"ðŸ·ï¸"}),"ÙØ¦Ø§ØªÙ†Ø§ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©"]}),k.jsx("div",{style:we.categoriesGrid,children:[{icon:"ðŸ’»",name:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",count:"50+"},{icon:"ðŸª‘",name:"Ø£Ø«Ø§Ø«",count:"30+"},{icon:"ðŸ‘•",name:"Ù…Ù„Ø§Ø¨Ø³",count:"40+"},{icon:"ðŸ“š",name:"ÙƒØªØ¨",count:"25+"},{icon:"ðŸŽ®",name:"Ø£Ù„Ø¹Ø§Ø¨",count:"20+"},{icon:"ðŸ ",name:"Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©",count:"35+"}].map((e,t)=>k.jsxs("div",{className:"stats-card netflix-lift",style:we.categoryCard,children:[k.jsx("div",{className:"icon-3d",style:{fontSize:"48px",marginBottom:"16px"},children:e.icon}),k.jsx("h3",{style:we.categoryName,children:e.name}),k.jsxs("p",{style:we.categoryCount,children:[e.count," Ù…Ù†ØªØ¬"]})]},t))})]}),k.jsx("div",{className:"glow-divider"}),t.length>0&&k.jsxs("div",{style:we.offersSection,children:[k.jsxs("h2",{style:we.offersTitle,children:[k.jsx("span",{className:"icon-3d",style:{marginLeft:"16px"},children:"ðŸŽ‰"}),"Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­Ø§Ù„ÙŠØ©"]}),k.jsx("div",{style:we.offersGrid,children:t.map(e=>k.jsxs("div",{className:"card netflix-spotlight netflix-lift",style:we.offerCard,children:[e.image&&k.jsx("img",{src:e.image,alt:e.title,style:we.offerImage}),k.jsxs("div",{style:we.offerContent,children:[k.jsx("h3",{style:we.offerTitle,children:e.title}),k.jsx("p",{style:we.offerDesc,children:e.description}),e.discount_percentage&&k.jsxs("div",{style:we.discountBadge,className:"netflix-badge",children:["ðŸ”¥ Ø®ØµÙ… ",e.discount_percentage,"%"]}),e.end_date&&k.jsxs("p",{style:we.offerDate,children:["â° ÙŠÙ†ØªÙ‡ÙŠ: ",new Date(e.end_date).toLocaleDateString("ar-EG")]})]})]},e.id))})]}),k.jsx("div",{className:"glow-divider"}),k.jsxs("div",{style:we.howItWorksSection,children:[k.jsxs("h2",{style:we.sectionTitle,children:[k.jsx("span",{className:"icon-3d",style:{marginLeft:"16px"},children:"ðŸ”„"}),"ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø¨ÙŠÙƒÙŠØ§ØŸ"]}),k.jsx("div",{style:we.stepsGrid,children:[{icon:"ðŸ“¸",title:"ØµÙˆØ± Ù…Ù†ØªØ¬Ùƒ",desc:"Ø§Ù„ØªÙ‚Ø· ØµÙˆØ± ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ù†ØªØ¬"},{icon:"ðŸ’°",title:"Ø­Ø¯Ø¯ Ø§Ù„Ø³Ø¹Ø±",desc:"Ø§Ù„Ø³Ø¹Ø± ÙŠØ­Ø¯Ø¯Ù‡ Ø§Ù„Ù…Ø¯ÙŠØ±"},{icon:"âœ…",title:"Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©",desc:"Ø³Ù†Ø±Ø§Ø¬Ø¹ Ù…Ù†ØªØ¬Ùƒ ÙˆÙ†ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡"},{icon:"ðŸŽ‰",title:"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹",desc:"Ù…Ù†ØªØ¬Ùƒ Ù…ØªØ§Ø­ Ù„Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ù†!"}].map((e,t)=>k.jsxs("div",{className:"stats-card netflix-lift",style:we.stepCard,children:[k.jsx("div",{className:"icon-3d",style:{fontSize:"56px",marginBottom:"20px"},children:e.icon}),k.jsx("div",{style:we.stepNumber,children:t+1}),k.jsx("h3",{style:we.stepTitle,children:e.title}),k.jsx("p",{style:we.stepDesc,children:e.desc})]},t))})]}),k.jsx("div",{style:we.finalCTA,children:k.jsxs("div",{className:"stats-card",style:we.ctaCard,children:[k.jsx("div",{className:"icon-3d",style:{fontSize:"64px",marginBottom:"24px"},children:"ðŸš€"}),k.jsx("h2",{style:we.ctaTitle,children:"Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡ØŸ"}),k.jsx("p",{style:we.ctaDesc,children:"Ø§Ù†Ø¶Ù… Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ† Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ† Ø¹Ù„Ù‰ Ø¨ÙŠÙƒÙŠØ§"}),k.jsx("button",{className:"morph-button",onClick:()=>e("/add-product"),style:{marginTop:"24px"},children:"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ù†"})]})})]})}const we={heroSection:{textAlign:"center",marginBottom:"60px",padding:"60px 20px"},heroContent:{marginBottom:"48px"},heroTitle:{fontSize:"72px",marginBottom:"16px",fontWeight:"900",letterSpacing:"-2px"},heroSubtitle:{fontSize:"28px",color:"#d1d5db",fontWeight:"600",marginBottom:"16px"},heroDescription:{fontSize:"18px",color:"#9ca3af",marginBottom:"32px",maxWidth:"600px",margin:"0 auto 32px"},heroButtons:{display:"flex",gap:"20px",justifyContent:"center",flexWrap:"wrap"},statsRow:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px",maxWidth:"900px",margin:"0 auto"},statCard:{textAlign:"center"},categoriesSection:{marginBottom:"60px"},sectionTitle:{fontSize:"36px",color:"#f9fafb",marginBottom:"40px",fontWeight:"700",textShadow:"0 2px 10px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"},categoriesGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"24px"},categoryCard:{textAlign:"center",cursor:"pointer"},categoryName:{fontSize:"18px",fontWeight:"600",color:"#f9fafb",marginBottom:"8px"},categoryCount:{fontSize:"14px",color:"#9ca3af"},offersSection:{marginBottom:"60px"},offersTitle:{fontSize:"36px",color:"#f9fafb",marginBottom:"40px",fontWeight:"700",textShadow:"0 2px 10px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"},offersGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"32px"},offerCard:{overflow:"hidden"},offerImage:{width:"100%",height:"260px",objectFit:"cover"},offerContent:{padding:"32px"},offerTitle:{fontSize:"24px",fontWeight:"700",color:"#f9fafb",marginBottom:"12px"},offerDesc:{color:"#d1d5db",marginBottom:"20px",lineHeight:"1.7"},discountBadge:{display:"inline-block",marginBottom:"12px"},offerDate:{fontSize:"13px",color:"#9ca3af"},howItWorksSection:{marginBottom:"60px"},stepsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"32px"},stepCard:{textAlign:"center",position:"relative"},stepNumber:{position:"absolute",top:"20px",right:"20px",width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #6b7c59 0%, #556b2f 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"700",boxShadow:"0 4px 15px rgba(107, 124, 89, 0.4)"},stepTitle:{fontSize:"20px",fontWeight:"700",color:"#f9fafb",marginBottom:"12px"},stepDesc:{fontSize:"15px",color:"#d1d5db",lineHeight:"1.6"},finalCTA:{marginTop:"80px",marginBottom:"60px"},ctaCard:{textAlign:"center",padding:"60px 40px",maxWidth:"600px",margin:"0 auto"},ctaTitle:{fontSize:"36px",fontWeight:"800",color:"#f9fafb",marginBottom:"16px"},ctaDesc:{fontSize:"18px",color:"#d1d5db",lineHeight:"1.6"}};if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n  @media (max-width: 768px) {\n    .netflix-hero {\n      padding: 40px 16px !important;\n    }\n    \n    .netflix-hero h1 {\n      font-size: 48px !important;\n    }\n    \n    .netflix-hero p {\n      font-size: 16px !important;\n    }\n    \n    .morph-button {\n      width: 100%;\n      margin-bottom: 12px;\n    }\n    \n    .stats-card {\n      padding: 20px !important;\n    }\n    \n    .icon-3d {\n      width: 48px !important;\n      height: 48px !important;\n      font-size: 24px !important;\n    }\n    \n    .stats-number {\n      font-size: 32px !important;\n    }\n    \n    .category-card {\n      padding: 20px !important;\n    }\n    \n    .offer-card {\n      margin-bottom: 16px;\n    }\n    \n    .step-card {\n      padding: 24px !important;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .netflix-hero h1 {\n      font-size: 36px !important;\n    }\n    \n    .netflix-hero p {\n      font-size: 14px !important;\n    }\n    \n    .stats-number {\n      font-size: 28px !important;\n    }\n    \n    .sectionTitle {\n      font-size: 24px !important;\n    }\n  }\n",document.head.appendChild(e)}if("undefined"!=typeof document){const e=document.createElement("style");e.textContent="\n  @keyframes skeleton-pulse {\n    0%, 100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.5;\n    }\n  }\n  \n  @keyframes skeleton-shimmer {\n    0% {\n      background-position: -200% 0;\n    }\n    100% {\n      background-position: 200% 0;\n    }\n  }\n",document.head.appendChild(e)}function Se(){const[e,t]=p.useState([]),[n,i]=p.useState([]),[r,o]=p.useState("all"),[s,a]=p.useState(!1),[x,u]=p.useState(1),[g,f]=p.useState(1),[h,m]=p.useState(0),{fetchProducts:y}=he(),{profile:b}=le();p.useEffect(()=>{w();const e=ae.channel("products-changes").on("postgres_changes",{event:"*",schema:"public",table:"products",filter:"status=eq.approved"},e=>{j(x)}).subscribe(),t=e=>{s&&!e.target.closest(".dropdown-container")&&a(!1)};return document.addEventListener("mousedown",t),()=>{ae.removeChannel(e),document.removeEventListener("mousedown",t)}},[s,x]),p.useEffect(()=>{n.length>=0&&j(x)},[n,x]);const j=(e=1)=>c(this,null,function*(){try{const i=yield y(null==b?void 0:b.location,e,20),r=i.data.filter(e=>!e.choice_type||"sell"===e.choice_type).map(e=>{const t=n.find(t=>t.is_active&&t.discount_percentage&&t.category===e.category&&(!t.end_date||new Date(t.end_date)>new Date));if(t){const n=Math.round(e.final_price*(t.discount_percentage/100));return d(l({},e),{original_final_price:e.final_price,final_price:e.final_price-n,active_offer:t})}return e});t(r),f(i.totalPages||1),m(i.count||0)}catch(i){}}),v=e=>{e>=1&&e<=g&&u(e)},w=()=>c(this,null,function*(){try{let e=ae.from("offers").select("*").eq("is_active",!0).order("created_at",{ascending:!1});const{data:t,error:n}=yield e;if(n)throw n;const r=(null==t?void 0:t.filter(e=>!e.target_location||e.target_location===(null==b?void 0:b.location)))||[];i(r)}catch(e){}}),S=[{id:"all",name:"Ø§Ù„ÙƒÙ„",icon:"ðŸ›ï¸"},{id:"electronics",name:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",icon:"ðŸ’»"},{id:"furniture",name:"Ø£Ø«Ø§Ø«",icon:"ðŸª‘"},{id:"clothes",name:"Ù…Ù„Ø§Ø¨Ø³",icon:"ðŸ‘•"},{id:"books",name:"ÙƒØªØ¨",icon:"ðŸ“š"},{id:"games",name:"Ø£Ù„Ø¹Ø§Ø¨",icon:"ðŸŽ®"},{id:"home",name:"Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©",icon:"ðŸ "}],_=S.find(e=>e.id===r)||S[0],C="all"===r?e:e.filter(e=>e.category===r);return k.jsxs("div",{className:"container",children:[k.jsxs("div",{style:_e.header,children:[k.jsxs("div",{style:_e.titleContainer,children:[k.jsx("div",{className:"icon-3d",style:_e.titleIcon,children:"ðŸ›ï¸"}),k.jsx("h1",{style:_e.title,children:"ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"})]}),k.jsx("p",{style:_e.subtitle,children:"Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ¹Ù…Ù„Ø©"})]}),k.jsx("div",{style:_e.categoriesBar,children:k.jsxs("div",{style:_e.dropdownContainer,className:"dropdown-container",children:[k.jsxs("button",{className:"morph-button",style:_e.dropdownButton,onClick:()=>a(!s),children:[k.jsx("span",{style:{fontSize:"24px",marginLeft:"12px"},children:_.icon}),k.jsx("span",{style:{fontSize:"18px",fontWeight:"700"},children:_.name}),k.jsx("span",{style:{fontSize:"20px",marginRight:"12px",transition:"transform 0.3s ease",transform:s?"rotate(180deg)":"rotate(0deg)"},children:"â–¼"})]}),s&&k.jsx("div",{style:_e.dropdownMenu,className:"card",children:S.map(e=>k.jsxs("button",{className:"dropdown-item",style:d(l({},_e.dropdownItem),{background:r===e.id?"rgba(107, 124, 89, 0.3)":"transparent"}),onClick:()=>{o(e.id),a(!1)},children:[k.jsx("span",{style:{fontSize:"24px",marginLeft:"12px"},children:e.icon}),k.jsx("span",{style:{fontSize:"16px",fontWeight:"600"},children:e.name}),r===e.id&&k.jsx("span",{style:{marginRight:"auto",color:"#6b7c59",fontSize:"18px"},children:"âœ“"})]},e.id))})]})}),k.jsx("div",{style:_e.productsInfo,children:k.jsxs("p",{style:_e.count,children:[h," Ù…Ù†ØªØ¬ Ù…ØªØ§Ø­ - Ø§Ù„ØµÙØ­Ø© ",x," Ù…Ù† ",g]})}),0===C.length?k.jsxs("div",{style:_e.empty,children:[k.jsx("div",{className:"icon-3d",style:{fontSize:"80px",marginBottom:"24px"},children:"ðŸ“¦"}),k.jsx("h3",{style:_e.emptyTitle,children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª"}),k.jsx("p",{style:_e.emptyText,children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]}):k.jsxs(k.Fragment,{children:[k.jsx("div",{style:_e.grid,children:C.map(e=>k.jsx(be,{product:e},e.id))}),g>1&&k.jsxs("div",{style:_e.pagination,children:[k.jsx("button",{className:"btn btn-secondary",onClick:()=>v(x-1),disabled:1===x,style:l(l({},_e.pageButton),1===x?_e.disabledButton:{}),children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),k.jsx("div",{style:_e.pageNumbers,children:[...Array(g)].map((e,t)=>{const n=t+1;return 1===n||n===g||n>=x-1&&n<=x+1?k.jsx("button",{className:"btn",onClick:()=>v(n),style:l(l({},_e.pageNumber),x===n?_e.activePage:{}),children:n},n):n===x-2||n===x+2?k.jsx("span",{style:_e.ellipsis,children:"..."},n):null})}),k.jsx("button",{className:"btn btn-secondary",onClick:()=>v(x+1),disabled:x===g,style:l(l({},_e.pageButton),x===g?_e.disabledButton:{}),children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})}const _e={header:{textAlign:"center",marginBottom:"48px",padding:"40px 20px"},titleContainer:{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",marginBottom:"16px",flexWrap:"wrap"},titleIcon:{fontSize:"64px",background:"linear-gradient(135deg, rgba(107, 124, 89, 0.2) 0%, rgba(139, 115, 85, 0.2) 100%)",width:"100px",height:"100px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 60px rgba(107, 124, 89, 0.4), 0 0 40px rgba(107, 124, 89, 0.3)",animation:"pulse-glow 2s ease-in-out infinite",border:"3px solid rgba(107, 124, 89, 0.3)"},title:{fontSize:"48px",fontWeight:"900",color:"#f9fafb",margin:0,textShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",letterSpacing:"-1px"},subtitle:{fontSize:"18px",color:"#d1d5db"},categoriesBar:{display:"flex",justifyContent:"center",marginBottom:"40px",padding:"0 20px"},dropdownContainer:{position:"relative",width:"100%",maxWidth:"400px"},dropdownButton:{width:"100%",padding:"16px 24px",background:"linear-gradient(135deg, #6b7c59 0%, #556b2f 100%)",border:"none",borderRadius:"50px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 8px 25px rgba(107, 124, 89, 0.4)"},dropdownMenu:{position:"absolute",top:"70px",left:0,right:0,zIndex:1e3,maxHeight:"400px",overflowY:"auto",borderRadius:"20px",animation:"dropdown-fade-in 0.3s ease"},dropdownItem:{width:"100%",padding:"16px 24px",background:"transparent",border:"none",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",fontSize:"16px",color:"#f9fafb",textAlign:"right",borderBottom:"1px solid rgba(107, 124, 89, 0.1)"},productsInfo:{textAlign:"center",marginBottom:"32px"},count:{fontSize:"16px",color:"#9ca3af",fontWeight:"600"},empty:{textAlign:"center",padding:"80px 20px",color:"#9ca3af"},emptyTitle:{fontSize:"24px",color:"#d1d5db",marginBottom:"12px"},emptyText:{fontSize:"16px",color:"#9ca3af"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"40px",marginBottom:"60px"},pagination:{display:"flex",justifyContent:"center",alignItems:"center",gap:"16px",marginTop:"40px",padding:"20px",flexWrap:"wrap"},pageButton:{minWidth:"120px",padding:"12px 24px"},disabledButton:{opacity:.5,cursor:"not-allowed"},pageNumbers:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},pageNumber:{minWidth:"40px",padding:"8px 12px",borderRadius:"8px"},activePage:{background:"linear-gradient(135deg, #6b7c59 0%, #556b2f 100%)",color:"white"},ellipsis:{padding:"8px",color:"#9ca3af"}};function Ce(){const[e,t]=p.useState({title:"",description:"",category:"",weight:""}),[n,i]=p.useState([]),[r,o]=p.useState([]),[s,a]=p.useState(!1),[x,u]=p.useState(0),[g,h]=p.useState(""),[m,y]=p.useState(!1),[b,j]=p.useState(0),v=p.useRef(null),[w,S]=p.useState(!1),{user:_}=le(),C=f(),N=e=>{if(e.length+n.length>10)return void h("ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ 10 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰");const t=[],r=[];let s=!1;e.forEach(e=>{const n=(e=>["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>5242880?"Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª":null:"Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ù† Ù†ÙˆØ¹ JPG, PNG, Ø£Ùˆ WebP")(e);if(n)return h(n),void(s=!0);t.push(e);const a=new FileReader;a.onload=n=>{r.push({file:e,preview:n.target.result}),r.length===t.length&&(i(e=>[...e,...t]),o(e=>[...e,...r]))},a.readAsDataURL(e)}),s||h("")},B=()=>c(this,null,function*(){const e=[];for(let t=0;t<n.length;t++){const i=n[t],r=`${_.id}/${Date.now()}_${t}_${i.name}`,{error:o}=yield ae.storage.from("products").upload(r,i,{cacheControl:"3600",upsert:!1});if(o)throw new Error(`ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© ${t+1}: ${o.message}`);const{data:{publicUrl:s}}=ae.storage.from("products").getPublicUrl(r);e.push(s),u(Math.round((t+1)/n.length*100))}return e});return k.jsx("div",{className:"container",children:k.jsxs("div",{className:"card",style:ke.card,children:[k.jsx("h1",{style:ke.title,children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"}),g&&k.jsx("div",{style:ke.error,children:g}),k.jsxs("form",{onSubmit:t=>c(this,null,function*(){if(t.preventDefault(),e.title&&e.description&&e.category)if(0!==n.length){a(!0),h("");try{const t=yield B(),n={user_id:_.id,title:e.title,description:e.description,category:e.category,images:t,status:"pending"};e.weight&&e.weight>0&&(n.weight=parseFloat(e.weight));const{data:i,error:r}=yield ae.from("products").insert(n).select().single();if(r)throw r;const{data:o}=yield ae.from("profiles").select("id").eq("role","admin");if(o&&o.length>0){const t=o.map(t=>({user_id:t.id,product_id:i.id,message:`Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©: ${e.title}`,type:"new_product"}));yield ae.from("notifications").insert(t)}alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©. Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹"),C("/profile")}catch(i){h(i.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬")}finally{a(!1)}}else h("ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");else h("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")}),style:ke.form,children:[k.jsxs("div",{style:ke.field,children:[k.jsx("label",{style:ke.label,children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *"}),k.jsx("input",{type:"text",className:"input",value:e.title,onChange:n=>t(d(l({},e),{title:n.target.value})),placeholder:"Ù…Ø«Ø§Ù„: Ù‡Ø§ØªÙ Ø¢ÙŠÙÙˆÙ† 12",required:!0})]}),k.jsxs("div",{style:ke.field,children:[k.jsx("label",{style:ke.label,children:"Ø§Ù„ÙØ¦Ø© *"}),k.jsxs("select",{className:"input",value:e.category,onChange:n=>t(d(l({},e),{category:n.target.value})),required:!0,children:[k.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬"}),k.jsx("option",{value:"electronics",children:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª"}),k.jsx("option",{value:"furniture",children:"Ø£Ø«Ø§Ø«"}),k.jsx("option",{value:"clothes",children:"Ù…Ù„Ø§Ø¨Ø³"}),k.jsx("option",{value:"books",children:"ÙƒØªØ¨"}),k.jsx("option",{value:"toys",children:"Ø£Ù„Ø¹Ø§Ø¨"}),k.jsx("option",{value:"appliances",children:"Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©"}),k.jsx("option",{value:"sports",children:"Ø±ÙŠØ§Ø¶Ø©"}),k.jsx("option",{value:"jewelry",children:"Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª"}),k.jsx("option",{value:"other",children:"Ø£Ø®Ø±Ù‰"})]})]}),k.jsxs("div",{style:ke.field,children:[k.jsx("label",{style:ke.label,children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ *"}),k.jsx("textarea",{className:"input",rows:"5",value:e.description,onChange:n=>t(d(l({},e),{description:n.target.value})),placeholder:"Ø§ÙƒØªØ¨ ÙˆØµÙ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ØŒ Ø­Ø§Ù„ØªÙ‡ØŒ Ù…Ù…ÙŠØ²Ø§ØªÙ‡...",required:!0})]}),k.jsxs("div",{style:ke.field,children:[k.jsx("label",{style:ke.label,children:"Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…) - Ø§Ø®ØªÙŠØ§Ø±ÙŠ"}),k.jsx("input",{type:"number",step:"0.01",min:"0.01",className:"input",value:e.weight,onChange:n=>t(d(l({},e),{weight:n.target.value})),placeholder:"Ù…Ø«Ø§Ù„: 0.5"}),k.jsx("small",{style:ke.hint,children:"Ø£Ø¯Ø®Ù„ Ø§Ù„ÙˆØ²Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„ÙƒÙŠÙ„ÙˆØ¬Ø±Ø§Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"})]}),k.jsxs("div",{style:ke.field,children:[k.jsx("label",{style:ke.label,children:"ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬ * (Ø­ØªÙ‰ 10 ØµÙˆØ±)"}),k.jsxs("div",{style:l(l({},ke.dropZone),w?ke.dropZoneDragging:{}),onDragOver:e=>{e.preventDefault(),S(!0)},onDragLeave:e=>{e.preventDefault(),S(!1)},onDrop:e=>{e.preventDefault(),S(!1);const t=Array.from(e.dataTransfer.files);N(t)},onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},children:[k.jsxs("div",{style:ke.dropZoneContent,children:[k.jsx("div",{style:ke.uploadIcon,children:"ðŸ“·"}),k.jsx("p",{style:ke.dropZoneText,children:w?"Ø£ÙÙ„Øª Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§":"Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±"}),k.jsx("p",{style:ke.dropZoneSubtext,children:"JPG, PNG, WebP Ø­ØªÙ‰ 5MB Ù„ÙƒÙ„ ØµÙˆØ±Ø©"})]}),k.jsx("input",{ref:v,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);N(t)},style:{display:"none"}})]}),r.length>0&&k.jsxs("div",{style:ke.imagePreviewContainer,children:[k.jsx("div",{style:ke.imagePreviewGrid,children:r.map((e,t)=>k.jsxs("div",{style:ke.imagePreviewItem,children:[k.jsx("img",{src:e.preview,alt:`Ù…Ø¹Ø§ÙŠÙ†Ø© ${t+1}`,style:ke.imagePreviewThumb,onClick:()=>(e=>{j(e),y(!0)})(t)}),k.jsx("button",{type:"button",style:ke.removeImageBtn,onClick:()=>(e=>{i(t=>t.filter((t,n)=>n!==e)),o(t=>t.filter((t,n)=>n!==e))})(t),children:"âœ•"})]},t))}),k.jsxs("p",{style:ke.imageCount,children:[r.length," ØµÙˆØ±Ø© Ù…Ø­Ø¯Ø¯Ø©"]})]}),x>0&&x<100&&k.jsxs("div",{style:ke.progressContainer,children:[k.jsx("div",{style:ke.progressBar,children:k.jsx("div",{style:d(l({},ke.progressFill),{width:`${x}%`})})}),k.jsxs("p",{style:ke.progressText,children:["Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±... ",x,"%"]})]}),k.jsx("small",{style:ke.hint,children:"Ø§Ù„ØªÙ‚Ø· ØµÙˆØ± ÙˆØ§Ø¶Ø­Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨"})]}),k.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s,style:ke.submitBtn,children:s?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"})]}),k.jsx("div",{style:ke.note,children:k.jsx("p",{children:"ðŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨"})}),m&&k.jsx(me,{images:r.map(e=>e.preview),initialIndex:b,onClose:()=>{y(!1)}})]})})}const ke={card:{maxWidth:"600px",margin:"0 auto"},title:{fontSize:"28px",marginBottom:"24px",textAlign:"center",color:"#f9fafb",fontWeight:"700"},error:{background:"#fee2e2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",textAlign:"center"},form:{display:"flex",flexDirection:"column",gap:"20px"},field:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontWeight:"600",color:"#e5e7eb",fontSize:"16px"},imageCount:{color:"#10b981",fontWeight:"600",fontSize:"14px"},hint:{fontSize:"13px",color:"#9ca3af",marginTop:"4px"},submitBtn:{width:"100%",padding:"14px",fontSize:"18px",fontWeight:"600"},note:{marginTop:"20px",padding:"16px",background:"rgba(107, 124, 89, 0.1)",borderRadius:"8px",border:"1px solid rgba(107, 124, 89, 0.3)",textAlign:"center",color:"#d1d5db",fontSize:"14px"},dropZone:{border:"2px dashed #d1d5db",borderRadius:"12px",padding:"40px 20px",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"rgba(31, 41, 55, 0.5)",marginBottom:"20px"},dropZoneDragging:{borderColor:"#6b7c59",backgroundColor:"rgba(107, 124, 89, 0.1)",transform:"scale(1.02)"},dropZoneContent:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},uploadIcon:{fontSize:"48px",opacity:"0.7"},dropZoneText:{fontSize:"18px",fontWeight:"600",color:"#e5e7eb",margin:"0"},dropZoneSubtext:{fontSize:"14px",color:"#9ca3af",margin:"0"},imagePreviewContainer:{marginTop:"20px"},imagePreviewGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"12px"},imagePreviewItem:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"2px solid rgba(107, 124, 89, 0.3)",transition:"all 0.2s ease"},imagePreviewThumb:{width:"100%",height:"120px",objectFit:"cover",cursor:"pointer",display:"block"},removeImageBtn:{position:"absolute",top:"8px",left:"8px",background:"rgba(239, 68, 68, 0.9)",border:"none",borderRadius:"50%",width:"28px",height:"28px",color:"white",fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},progressContainer:{marginTop:"20px"},progressBar:{height:"8px",backgroundColor:"rgba(31, 41, 55, 0.5)",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},progressFill:{height:"100%",backgroundColor:"#6b7c59",transition:"width 0.3s ease"},progressText:{textAlign:"center",color:"#6b7c59",fontWeight:"600",margin:"0"}};function Ne(){const{profile:e,signOut:t}=le(),{fetchUserProducts:n,acceptNegotiation:i,rejectNegotiation:r}=he(),[o,s]=p.useState([]),[a,x]=p.useState(null),u=()=>c(this,null,function*(){try{x(null);const t=yield n(e.id);s(t)}catch(t){x(t.message||"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª")}}),g=()=>{setLoading(!0),x(null),u()};p.useEffect(()=>{u()},[e.id]);const f=e=>c(this,null,function*(){if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ù‚Ø¨ÙˆÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŸ"))try{yield i(e),alert("ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¶! Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ù…Ù†ØªØ¬Ùƒ Ù„Ù„Ø¨ÙŠØ¹"),u()}catch(t){alert("Ø®Ø·Ø£ ÙÙŠ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¶")}}),h=e=>c(this,null,function*(){if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø±ÙØ¶ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±ØŸ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„ØªÙØ§ÙˆØ¶ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"))try{yield r(e),alert("Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"),u()}catch(t){alert("Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¶ Ø§Ù„Ø¹Ø±Ø¶")}}),m=e=>({pending:"#f59e0b",approved:"#10b981",rejected:"#ef4444",awaiting_seller:"#3b82f6"}[e]||"#6b7280");return a?k.jsx("div",{className:"container",children:k.jsxs("div",{className:"card",style:Be.error,children:[k.jsx("h2",{children:"Ø­Ø¯Ø« Ø®Ø·Ø£"}),k.jsx("p",{children:a}),k.jsx("button",{className:"btn btn-primary",onClick:g,children:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©"})]})}):k.jsx(de,{onRetry:g,children:k.jsxs("div",{className:"container",children:[k.jsxs("div",{style:Be.statsGrid,children:[k.jsxs("div",{className:"stats-card",children:[k.jsx("div",{className:"icon-3d",children:"ðŸ‘¤"}),k.jsxs("div",{style:{marginTop:"16px"},children:[k.jsx("div",{className:"stats-number",children:o.length}),k.jsx("div",{className:"stats-label",children:"Ù…Ù†ØªØ¬Ø§ØªÙŠ"})]})]}),k.jsxs("div",{className:"stats-card",children:[k.jsx("div",{className:"icon-3d",children:"âœ…"}),k.jsxs("div",{style:{marginTop:"16px"},children:[k.jsx("div",{className:"stats-number",children:o.filter(e=>"approved"===e.status).length}),k.jsx("div",{className:"stats-label",children:"ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"})]})]}),k.jsxs("div",{className:"stats-card",children:[k.jsx("div",{className:"icon-3d",children:"â³"}),k.jsxs("div",{style:{marginTop:"16px"},children:[k.jsx("div",{className:"stats-number",children:o.filter(e=>"pending"===e.status).length}),k.jsx("div",{className:"stats-label",children:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"})]})]})]}),k.jsx("div",{className:"glow-divider"}),k.jsxs("div",{className:"card",style:Be.profileCard,children:[k.jsxs("div",{style:Be.profileHeader,children:[k.jsxs("h1",{style:Be.title,className:"netflix-shimmer",children:[k.jsx("span",{className:"icon-3d",style:{marginLeft:"16px"},children:"ðŸ‘¤"}),"Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ"]}),k.jsx("button",{className:"btn btn-danger",onClick:t,style:Be.logoutBtn,children:"ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),k.jsxs("div",{style:Be.info,children:[k.jsxs("div",{style:Be.infoRow,children:[k.jsx("span",{style:Be.label,children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:"}),k.jsx("span",{style:Be.value,children:e.username})]}),k.jsxs("div",{style:Be.infoRow,children:[k.jsx("span",{style:Be.label,children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:"}),k.jsx("span",{style:Be.value,children:e.email})]}),k.jsxs("div",{style:Be.infoRow,children:[k.jsx("span",{style:Be.label,children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹:"}),k.jsx("span",{style:Be.value,children:e.location})]}),k.jsxs("div",{style:Be.infoRow,children:[k.jsx("span",{style:Be.label,children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:"}),k.jsx("span",{style:Be.value,children:e.phone})]})]})]}),a?k.jsxs("div",{className:"card",style:Be.errorCard,children:[k.jsx("div",{style:Be.errorIcon,children:"âš ï¸"}),k.jsx("h3",{style:Be.errorTitle,children:"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),k.jsx("p",{style:Be.errorMessage,children:a}),k.jsx("button",{className:"btn btn-primary",onClick:g,children:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©"})]}):k.jsxs("div",{style:Be.productsSection,children:[k.jsxs("h2",{style:Be.subtitle,children:["Ù…Ù†ØªØ¬Ø§ØªÙŠ (",o.length,")"]}),0===o.length?k.jsx("div",{style:Be.empty,children:k.jsx("p",{children:"Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯"})}):k.jsx("div",{style:Be.productsList,children:o.map(e=>{return k.jsx("div",{className:"card",style:Be.productCard,children:k.jsxs("div",{style:Be.productLayout,children:[e.images&&e.images.length>0&&k.jsxs("div",{style:Be.productImages,children:[k.jsx("img",{src:e.images[0],alt:e.title,style:Be.productImage,loading:"lazy",onError:e=>{e.target.src="https://placehold.co/180x180/e2e8f0/64748b?text=Image+Not+Found"}}),e.images.length>1&&k.jsxs("div",{style:Be.imageCount,children:["+",e.images.length-1]})]}),k.jsxs("div",{style:Be.productInfo,children:[k.jsxs("div",{style:Be.productHeader,children:[k.jsx("h3",{style:Be.productTitle,children:e.title}),k.jsx("span",{style:d(l({},Be.status),{background:m(e.status)+"20",color:m(e.status)}),children:(n=e.status,{pending:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",approved:"ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©",rejected:"Ù…Ø±ÙÙˆØ¶",awaiting_seller:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚ØªÙƒ"}[n]||n)})]}),k.jsx("p",{style:Be.productDesc,children:e.description}),k.jsxs("div",{style:Be.productDetails,children:[e.category&&k.jsxs("span",{children:["Ø§Ù„ÙØ¦Ø©: ",(t=e.category,{electronics:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",furniture:"Ø£Ø«Ø§Ø«",clothes:"Ù…Ù„Ø§Ø¨Ø³",books:"ÙƒØªØ¨",toys:"Ø£Ù„Ø¹Ø§Ø¨",appliances:"Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©",sports:"Ø±ÙŠØ§Ø¶Ø©",jewelry:"Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª",other:"Ø£Ø®Ø±Ù‰"}[t]||t)]}),e.weight&&k.jsxs("span",{children:["Ø§Ù„ÙˆØ²Ù†: ",e.weight," ÙƒØ¬Ù…"]}),e.condition&&k.jsxs("span",{children:["Ø§Ù„Ø­Ø§Ù„Ø©: ",e.condition]}),k.jsx("span",{children:"recycle"===e.choice_type?"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¯ÙˆÙŠØ±":e.suggested_price?`${e.suggested_price} Ø¬Ù†ÙŠÙ‡`:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ³Ø¹ÙŠØ±"})]}),"recycle"===e.choice_type&&e.recycle_idea&&k.jsxs("div",{style:Be.recycleInfo,children:[k.jsx("strong",{children:"ðŸ’¡ ÙÙƒØ±Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±:"}),k.jsx("p",{children:e.recycle_idea})]}),"awaiting_seller"===e.status&&e.negotiated_price&&k.jsxs("div",{style:Be.negotiationOffer,children:[k.jsx("h4",{style:Be.negotiationTitle,children:"ðŸ¤ Ø¹Ø±Ø¶ Ø³Ø¹Ø± Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),k.jsxs("div",{style:Be.priceComparison,children:[k.jsxs("div",{children:[k.jsx("span",{style:Be.priceLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ù…Ù†Ùƒ:"}),k.jsxs("span",{style:Be.oldPrice,children:[e.suggested_price," Ø¬Ù†ÙŠÙ‡"]})]}),k.jsxs("div",{children:[k.jsx("span",{style:Be.priceLabel,children:"Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯:"}),k.jsxs("span",{style:Be.newPrice,children:[e.negotiated_price," Ø¬Ù†ÙŠÙ‡"]})]})]}),e.negotiation_note&&k.jsxs("p",{style:Be.negotiationNote,children:[k.jsx("strong",{children:"Ù…Ù„Ø§Ø­Ø¸Ø©:"})," ",e.negotiation_note]}),k.jsxs("div",{style:Be.negotiationActions,children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>f(e.id),children:"Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¶"}),k.jsx("button",{className:"btn btn-danger",onClick:()=>h(e.id),children:"Ø±ÙØ¶ Ø§Ù„Ø¹Ø±Ø¶"})]})]}),e.rejection_reason&&k.jsxs("div",{style:Be.rejection,children:[k.jsx("strong",{children:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:"})," ",e.rejection_reason]})]})]})},e.id);var t,n})})]})]})})}const Be={statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"40px"},profileCard:{marginBottom:"40px",padding:"40px"},profileHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",flexWrap:"wrap",gap:"16px"},title:{fontSize:"36px",color:"#f9fafb",fontWeight:"800",display:"flex",alignItems:"center"},logoutBtn:{fontSize:"14px",padding:"10px 20px"},info:{display:"flex",flexDirection:"column",gap:"16px"},infoRow:{display:"flex",justifyContent:"space-between",padding:"16px",background:"rgba(107, 124, 89, 0.04)",borderRadius:"16px",border:"1px solid rgba(107, 124, 89, 0.08)"},label:{fontWeight:"600",color:"#d1d5db",fontSize:"14px"},value:{color:"#f9fafb",fontWeight:"600"},productsSection:{marginTop:"48px"},subtitle:{fontSize:"28px",color:"#f9fafb",marginBottom:"32px",fontWeight:"700"},empty:{textAlign:"center",padding:"60px",color:"#999",fontSize:"16px"},errorCard:{textAlign:"center",padding:"40px",background:"rgba(220, 38, 38, 0.05)",border:"1px solid rgba(220, 38, 38, 0.2)"},errorIcon:{fontSize:"48px",marginBottom:"16px"},errorTitle:{color:"#dc2626",marginBottom:"8px"},errorMessage:{color:"#9ca3af",marginBottom:"24px"},productsList:{display:"flex",flexDirection:"column",gap:"24px"},productCard:{transition:"all 0.3s ease",padding:"24px"},productLayout:{display:"flex",gap:"24px",flexWrap:"wrap"},productImages:{position:"relative",flex:"0 0 180px",height:"180px"},productImage:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"16px"},imageCount:{position:"absolute",bottom:"12px",right:"12px",background:"rgba(107, 124, 89, 0.9)",backdropFilter:"blur(8px)",color:"white",padding:"6px 12px",borderRadius:"16px",fontSize:"13px",fontWeight:"500"},productInfo:{flex:"1",minWidth:"280px"},productHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",gap:"12px"},productTitle:{fontSize:"20px",fontWeight:"700",color:"#f9fafb"},status:{padding:"8px 16px",borderRadius:"20px",fontSize:"13px",fontWeight:"500",whiteSpace:"nowrap"},productDesc:{color:"#d1d5db",marginBottom:"16px",lineHeight:"1.6",fontSize:"15px"},productDetails:{display:"flex",justifyContent:"space-between",gap:"16px",flexWrap:"wrap",fontSize:"14px",color:"#9ca3af",paddingTop:"16px",borderTop:"1px solid rgba(107, 124, 89, 0.1)"},rejection:{marginTop:"16px",padding:"16px",background:"rgba(139, 115, 85, 0.08)",color:"#8b7355",borderRadius:"16px",fontSize:"14px",border:"1px solid rgba(139, 115, 85, 0.2)"},recycleInfo:{marginTop:"16px",padding:"16px",background:"rgba(107, 124, 89, 0.08)",color:"#556b2f",borderRadius:"16px",fontSize:"14px",border:"1px solid rgba(107, 124, 89, 0.2)"},negotiationOffer:{marginTop:"16px",padding:"20px",background:"rgba(107, 124, 89, 0.06)",borderRadius:"20px",border:"1px solid rgba(107, 124, 89, 0.15)"},negotiationTitle:{fontSize:"18px",fontWeight:"700",color:"#f9fafb",marginBottom:"16px"},priceComparison:{display:"flex",justifyContent:"space-around",marginBottom:"16px",gap:"20px",flexWrap:"wrap"},priceLabel:{display:"block",fontSize:"13px",color:"#9ca3af",marginBottom:"6px",fontWeight:"500"},oldPrice:{display:"block",fontSize:"18px",fontWeight:"500",color:"#b0b0b0",textDecoration:"line-through"},newPrice:{display:"block",fontSize:"22px",fontWeight:"600",color:"#6b7c59"},negotiationNote:{background:"rgba(107, 124, 89, 0.1)",padding:"14px",borderRadius:"12px",fontSize:"14px",marginBottom:"16px",color:"#d1d5db",lineHeight:"1.6",border:"1px solid rgba(107, 124, 89, 0.2)"},negotiationActions:{display:"flex",gap:"12px",flexWrap:"wrap"}};function ze(){const[e,t]=p.useState([]),[n,i]=p.useState([]),[r,o]=p.useState(null),[s,a]=p.useState(""),[x,u]=p.useState(""),[g,f]=p.useState(null),[h,m]=p.useState(0),[y,b]=p.useState(null),{fetchPendingProducts:j,approveProduct:v,rejectProduct:w,negotiateProduct:S}=he(),_=e=>{var t;return"pending"===e.status&&e.final_price&&(null==(t=e.negotiation_note)?void 0:t.includes("Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚"))?"ðŸŽ‰ Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚ - ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©":e.seller_rejected_negotiation?"ðŸ”´ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø±ÙØ¶ Ø§Ù„Ø³Ø¹Ø±":e.rejected_initial_price?"âŒ Ø±ÙØ¶ Ø§Ù„Ø³Ø¹Ø±":{pending:"â³ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯",approved:"âœ… ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„",rejected:"âŒ Ù…Ø±ÙÙˆØ¶ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹",awaiting_seller:"â° ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø±Ø¯ Ø§Ù„Ø¨Ø§Ø¦Ø¹"}[e.status]||e.status},C=e=>{var t;const n=l({},We.statusBadge);return"pending"===e.status&&e.final_price&&(null==(t=e.negotiation_note)?void 0:t.includes("Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚"))?d(l({},n),{background:"#10b981",color:"#ffffff",border:"3px solid #059669",fontWeight:"bold",fontSize:"14px",animation:"pulse 2s infinite"}):e.seller_rejected_negotiation?d(l({},n),{background:"#dc2626",color:"#ffffff",border:"3px solid #991b1b",fontWeight:"bold",fontSize:"14px",animation:"pulse 2s infinite"}):e.rejected_initial_price?d(l({},n),{background:"#fee2e2",color:"#dc2626",border:"2px solid #ef4444",fontWeight:"bold"}):l(l({},n),{pending:{background:"#fef3c7",color:"#000000",border:"2px solid #f59e0b"},approved:{background:"#f0fdf4",color:"#166534",border:"2px solid #10b981"},rejected:{background:"#fee2e2",color:"#991b1b",border:"2px solid #ef4444"},awaiting_seller:{background:"#eff6ff",color:"#000000",border:"2px solid #3b82f6"}}[e.status])};p.useEffect(()=>{let e=!0,n=null;return(()=>{c(this,null,function*(){try{n=setTimeout(()=>{e&&(t([]),i([]))},15e3),e&&(yield N())}catch(r){}finally{n&&clearTimeout(n)}})})(),()=>{e=!1,n&&clearTimeout(n)}},[]);const N=()=>c(this,null,function*(){try{const{data:{user:e},error:n}=yield ae.auth.getUser();if(n)throw n;if(!e)return alert("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹"),void(window.location.href="/login");const{data:r,error:o}=yield ae.from("profiles").select("role").eq("id",e.id).single();if(o)throw o;if(b(null==r?void 0:r.role),"admin"!==(null==r?void 0:r.role))return alert("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©"),void(window.location.href="/");const s=yield j();t(s||[]);const{data:a,error:l}=yield ae.from("profiles").select("*").order("created_at",{ascending:!1});l||i(a||[])}catch(e){if("AbortError"===e.name)return;const n=e.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: "+n),t([]),i([])}}),B=(e,t)=>c(this,null,function*(){try{yield v(e,t),alert("ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬"),N(),o(null)}catch(n){alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬")}}),z=(e,t)=>c(this,null,function*(){try{yield w(e,t),alert("ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ù†ØªØ¬"),N(),o(null)}catch(n){alert("Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¶ Ø§Ù„Ù…Ù†ØªØ¬")}});return k.jsxs("div",{className:"container",children:[k.jsx("h1",{style:We.title,children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),k.jsxs("div",{style:We.stats,children:[k.jsxs("div",{className:"card",style:We.statCard,children:[k.jsx("h3",{style:We.statNumber,children:e.length}),k.jsx("p",{style:We.statLabel,children:"Ù…Ù†ØªØ¬Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"})]}),k.jsxs("div",{className:"card",style:We.statCard,children:[k.jsx("h3",{style:We.statNumber,children:n.length}),k.jsx("p",{style:We.statLabel,children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"})]})]}),k.jsxs("div",{style:We.section,children:[k.jsx("h2",{style:We.subtitle,children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}),0===e.length?k.jsx("div",{style:We.empty,children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}):k.jsx("div",{style:We.productsList,children:e.map(e=>{var t,n,i,r,s,l;return k.jsxs("div",{className:"card",style:We.productCard,children:[k.jsx("div",{style:We.productImages,children:e.images.slice(0,4).map((t,n)=>k.jsx("img",{src:t,alt:`ØµÙˆØ±Ø© ${n+1}`,style:We.productImage,onClick:()=>{f(e.images),m(n)}},n))}),k.jsxs("div",{style:We.productInfo,children:[k.jsxs("div",{style:We.productHeader,children:[k.jsx("h3",{style:We.productTitle,children:e.title}),k.jsx("span",{style:C(e),children:_(e)})]}),k.jsx("p",{style:We.productDesc,children:e.description}),e.seller_rejected_negotiation&&k.jsxs("div",{style:We.rejectionWarning,children:[k.jsx("strong",{children:"âš ï¸ ØªÙ†Ø¨ÙŠÙ‡:"})," Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ø±ÙØ¶ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ÙˆØ¶ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆÙŠØ­ØªØ§Ø¬ ØªÙØ§ÙˆØ¶ Ø¬Ø¯ÙŠØ¯",e.negotiation_note&&k.jsx("p",{style:We.rejectionNote,children:e.negotiation_note})]}),"pending"===e.status&&e.final_price&&(null==(t=e.negotiation_note)?void 0:t.includes("Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚"))&&k.jsxs("div",{style:We.acceptanceNotice,children:[k.jsx("strong",{children:"âœ… Ø§Ù„Ø¨Ø§Ø¦Ø¹ ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¶!"}),k.jsxs("p",{children:["Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡: ",k.jsxs("span",{style:We.agreedPrice,children:[e.final_price," Ø¬Ù†ÙŠÙ‡"]})]}),k.jsx("p",{style:We.noticeText,children:"ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"})]}),k.jsxs("div",{style:We.productDetails,children:[e.category&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„ÙØ¦Ø©:"}),k.jsx("span",{style:We.sellerData,children:(l=e.category,{electronics:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",furniture:"Ø£Ø«Ø§Ø«",clothes:"Ù…Ù„Ø§Ø¨Ø³",books:"ÙƒØªØ¨",toys:"Ø£Ù„Ø¹Ø§Ø¨",appliances:"Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©",sports:"Ø±ÙŠØ§Ø¶Ø©",jewelry:"Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª",other:"Ø£Ø®Ø±Ù‰"}[l]||l)})]}),e.weight&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„ÙˆØ²Ù†:"}),k.jsxs("span",{style:We.sellerData,children:[e.weight," ÙƒØ¬Ù…"]})]}),e.condition&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ø­Ø§Ù„Ø©:"}),k.jsx("span",{style:We.sellerData,children:e.condition})]}),e.original_price&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ:"}),k.jsxs("span",{children:[e.original_price," Ø¬Ù†ÙŠÙ‡"]})]}),e.suggested_price&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­:"}),k.jsxs("span",{style:We.priceHighlight,children:[e.suggested_price," Ø¬Ù†ÙŠÙ‡"]})]}),e.discount_percentage&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ®ÙÙŠØ¶:"}),k.jsxs("span",{style:We.discountBadge,children:[e.discount_percentage,"%"]})]}),e.choice_type&&k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨:"}),k.jsx("span",{children:"recycle"===e.choice_type?"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¯ÙˆÙŠØ±":"Ø¨ÙŠØ¹"})]})]}),k.jsxs("div",{style:We.sellerInfo,children:[k.jsx("h4",{style:We.sellerTitle,children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹"}),k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ø§Ø³Ù…:"}),k.jsx("span",{style:We.sellerData,children:null==(n=e.profiles)?void 0:n.username})]}),k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ø¨Ø±ÙŠØ¯:"}),k.jsx("span",{style:We.sellerData,children:null==(i=e.profiles)?void 0:i.email})]}),k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ù‡Ø§ØªÙ:"}),k.jsx("span",{style:We.sellerData,children:null==(r=e.profiles)?void 0:r.phone})]}),k.jsxs("div",{style:We.detailRow,children:[k.jsx("span",{style:We.detailLabel,children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹:"}),k.jsx("span",{style:We.sellerData,children:null==(s=e.profiles)?void 0:s.location})]})]}),(!e.choice_type||"sell"===e.choice_type)&&k.jsxs("div",{style:We.actions,children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>{const t=prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ù†ØªØ¬ (Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡):");t&&t>0&&B(e.id,t)},children:"Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø±"}),k.jsx("button",{className:"btn btn-secondary",onClick:()=>(e=>{o(e),a(e.suggested_price),u("")})(e),children:"ØªÙØ§ÙˆØ¶"}),k.jsx("button",{className:"btn btn-danger",onClick:()=>{const t=prompt("Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:");t&&z(e.id,t)},children:"Ø±ÙØ¶"})]}),"recycle"===e.choice_type&&k.jsxs("div",{style:We.recycleNote,children:[k.jsx("p",{children:k.jsx("strong",{children:"ÙÙƒØ±Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±:"})}),k.jsx("p",{children:e.recycle_idea}),k.jsx("button",{className:"btn btn-primary",onClick:()=>B(e.id,0),style:{marginTop:"12px"},children:"Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±"})]})]})]},e.id)})})]}),r&&k.jsx("div",{style:We.modal,children:k.jsxs("div",{className:"card",style:We.modalContent,children:[k.jsx("h3",{style:We.modalTitle,children:"Ø§Ù„ØªÙØ§ÙˆØ¶ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø±"}),k.jsxs("p",{children:["Ø§Ù„Ù…Ù†ØªØ¬: ",r.title]}),r.suggested_price&&k.jsxs("p",{children:["Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„Ø³Ø§Ø¨Ù‚: ",r.suggested_price," Ø¬Ù†ÙŠÙ‡"]}),k.jsxs("div",{style:We.field,children:[k.jsx("label",{style:We.label,children:"Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±:"}),k.jsx("input",{type:"number",className:"input",value:s,onChange:e=>a(e.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨"})]}),k.jsxs("div",{style:We.field,children:[k.jsx("label",{style:We.label,children:"Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ø¨Ø§Ø¦Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):"}),k.jsx("textarea",{className:"input",rows:"3",value:x,onChange:e=>u(e.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ø³Ø¹Ø± Ù…Ø±ØªÙØ¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¨Ø³Ø¨Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬"})]}),k.jsxs("div",{style:We.modalActions,children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>c(this,null,function*(){if(!s||s<=0)alert("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ­ÙŠØ­");else try{yield S(r.id,s,x),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ÙˆØ¶ Ù„Ù„Ø¨Ø§Ø¦Ø¹"),N(),o(null),u("")}catch(e){alert("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ÙˆØ¶")}}),children:"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„Ø¨Ø§Ø¦Ø¹"}),k.jsx("button",{className:"btn",style:{background:"#10b981",color:"white"},onClick:()=>B(r.id,s),children:"Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ø¨Ø§Ø´Ø±Ø©"}),k.jsx("button",{className:"btn btn-secondary",onClick:()=>o(null),children:"Ø¥Ù„ØºØ§Ø¡"})]})]})}),g&&k.jsx(me,{images:g,initialIndex:h,onClose:()=>f(null)})]})}const We={title:{fontSize:"32px",color:"#10b981",marginBottom:"30px"},stats:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"40px"},statCard:{textAlign:"center",padding:"30px"},statNumber:{fontSize:"36px",color:"#10b981",marginBottom:"8px"},statLabel:{color:"#6b7280",fontSize:"16px"},section:{marginBottom:"40px"},subtitle:{fontSize:"24px",color:"#374151",marginBottom:"20px"},empty:{textAlign:"center",padding:"40px",color:"#6b7280"},productsList:{display:"flex",flexDirection:"column",gap:"24px"},productCard:{display:"flex",gap:"20px",flexWrap:"wrap"},productImages:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",flex:"0 0 300px"},productImage:{width:"100%",height:"140px",objectFit:"cover",borderRadius:"8px",cursor:"pointer",transition:"transform 0.3s, box-shadow 0.3s"},productInfo:{flex:"1",minWidth:"300px"},productHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",gap:"12px",flexWrap:"wrap"},productTitle:{fontSize:"20px",fontWeight:"600",color:"#1f2937",margin:0},statusBadge:{padding:"6px 14px",borderRadius:"20px",fontSize:"13px",fontWeight:"600",whiteSpace:"nowrap"},productDesc:{color:"#6b7280",marginBottom:"16px"},rejectionWarning:{background:"#fee2e2",border:"2px solid #dc2626",borderRadius:"8px",padding:"16px",marginBottom:"16px",color:"#991b1b",fontWeight:"600"},rejectionNote:{marginTop:"8px",fontSize:"14px",fontWeight:"normal",color:"#7f1d1d"},acceptanceNotice:{background:"#f0fdf4",border:"3px solid #10b981",borderRadius:"8px",padding:"16px",marginBottom:"16px",color:"#166534",fontWeight:"600"},agreedPrice:{fontSize:"20px",fontWeight:"bold",color:"#10b981"},noticeText:{marginTop:"8px",fontSize:"14px",fontWeight:"normal",color:"#166534"},productDetails:{background:"#f9fafb",padding:"16px",borderRadius:"8px",marginBottom:"16px"},detailRow:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},detailLabel:{fontWeight:"600",color:"#000000"},priceHighlight:{fontSize:"18px",fontWeight:"bold",color:"#10b981"},discountBadge:{background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"8px",fontSize:"14px",fontWeight:"600"},sellerInfo:{background:"#eff6ff",padding:"16px",borderRadius:"8px",marginBottom:"16px"},sellerTitle:{fontSize:"16px",fontWeight:"600",marginBottom:"12px",color:"#000000"},sellerData:{color:"#000000",fontWeight:"500"},actions:{display:"flex",gap:"12px",flexWrap:"wrap"},recycleNote:{background:"#f0fdf4",padding:"16px",borderRadius:"8px",border:"2px solid #10b981"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{maxWidth:"500px",width:"90%"},modalTitle:{fontSize:"20px",marginBottom:"16px",color:"#10b981"},field:{marginTop:"16px",marginBottom:"16px"},label:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#374151"},modalActions:{display:"flex",gap:"12px",marginTop:"20px"}};function Ie(){const{profile:e}=le(),t=f(),[n,i]=p.useState([]),[r,o]=p.useState(!1),[s,a]=p.useState({title:"",description:"",image:"",discount_percentage:"",category:"",target_location:"",end_date:""});p.useEffect(()=>{"admin"===(null==e?void 0:e.role)?x():t("/")},[e,t]);const x=()=>c(this,null,function*(){try{const{data:e,error:t}=yield ae.from("offers").select("*").order("created_at",{ascending:!1});if(t)throw t;i(e||[])}catch(e){}}),u=e=>c(this,null,function*(){try{let t=ae.from("profiles").select("id");e.target_location&&(t=t.eq("location",e.target_location));const{data:n}=yield t;if(n&&n.length>0){const t=n.map(t=>({user_id:t.id,message:`Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯: ${e.title}`,type:"offer"}));yield ae.from("notifications").insert(t)}}catch(t){}}),g=(e,t)=>c(this,null,function*(){try{const{data:n,error:i}=yield ae.from("offers").update({is_active:!t}).eq("id",e).select();if(i)throw i;alert(t?"ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­":"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­"),x()}catch(n){alert(`Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶: ${n.message}`)}}),h=e=>c(this,null,function*(){if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ØŸ"))try{const{error:t}=yield ae.from("offers").delete().eq("id",e);if(t)throw t;x()}catch(t){alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶")}});return k.jsxs("div",{className:"container",children:[k.jsxs("div",{style:Te.header,children:[k.jsx("h1",{style:Te.title,children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶"}),k.jsx("button",{className:"btn btn-primary",onClick:()=>o(!r),children:r?"Ø¥Ù„ØºØ§Ø¡":"+ Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯"})]}),r&&k.jsxs("div",{className:"card",style:Te.formCard,children:[k.jsx("h2",{style:Te.formTitle,children:"Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯"}),k.jsxs("form",{onSubmit:t=>c(this,null,function*(){if(t.preventDefault(),s.title&&s.description)try{const{data:t,error:n}=yield ae.from("offers").insert(d(l({},s),{discount_percentage:s.discount_percentage?parseInt(s.discount_percentage):null,category:s.category||null,target_location:s.target_location||null,end_date:s.end_date||null,created_by:e.id})).select().single();if(n)throw n;yield u(t),alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­!"),o(!1),a({title:"",description:"",image:"",discount_percentage:"",category:"",target_location:"",end_date:""}),x()}catch(n){alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶")}else alert("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„ÙˆØµÙ")}),children:[k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ *"}),k.jsx("input",{type:"text",className:"input",value:s.title,onChange:e=>a(d(l({},s),{title:e.target.value})),placeholder:"Ù…Ø«Ø§Ù„: Ø®ØµÙ… 50% Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø«Ø§Ø«",required:!0})]}),k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"ÙˆØµÙ Ø§Ù„Ø¹Ø±Ø¶ *"}),k.jsx("textarea",{className:"input",rows:"3",value:s.description,onChange:e=>a(d(l({},s),{description:e.target.value})),placeholder:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶...",required:!0})]}),k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),k.jsx("input",{type:"url",className:"input",value:s.image,onChange:e=>a(d(l({},s),{image:e.target.value})),placeholder:"https://example.com/image.jpg"})]}),k.jsxs("div",{style:Te.row,children:[k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… % (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),k.jsx("input",{type:"number",className:"input",value:s.discount_percentage,onChange:e=>a(d(l({},s),{discount_percentage:e.target.value})),placeholder:"50",min:"0",max:"100"})]}),k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),k.jsxs("select",{className:"input",value:s.category,onChange:e=>a(d(l({},s),{category:e.target.value})),children:[k.jsx("option",{value:"",children:"ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª"}),k.jsx("option",{value:"electronics",children:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª"}),k.jsx("option",{value:"furniture",children:"Ø£Ø«Ø§Ø«"}),k.jsx("option",{value:"clothes",children:"Ù…Ù„Ø§Ø¨Ø³"}),k.jsx("option",{value:"books",children:"ÙƒØªØ¨"}),k.jsx("option",{value:"toys",children:"Ø£Ù„Ø¹Ø§Ø¨"}),k.jsx("option",{value:"other",children:"Ø£Ø®Ø±Ù‰"})]})]})]}),k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),k.jsx("input",{type:"text",className:"input",value:s.target_location,onChange:e=>a(d(l({},s),{target_location:e.target.value})),placeholder:"Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„ÙƒÙ„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚"})]}),k.jsxs("div",{style:Te.field,children:[k.jsx("label",{style:Te.label,children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),k.jsx("input",{type:"datetime-local",className:"input",value:s.end_date,onChange:e=>a(d(l({},s),{end_date:e.target.value}))})]}),k.jsx("button",{type:"submit",className:"btn btn-primary",style:Te.submitBtn,children:"Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶"})]})]}),k.jsx("div",{style:Te.offersList,children:0===n.length?k.jsx("div",{className:"card",style:Te.empty,children:k.jsx("p",{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ø­Ø§Ù„ÙŠØ§Ù‹"})}):n.map(e=>{return k.jsxs("div",{className:"card",style:Te.offerCard,children:[e.image&&k.jsx("img",{src:e.image,alt:e.title,style:Te.offerImage}),k.jsxs("div",{style:Te.offerContent,children:[k.jsxs("div",{style:Te.offerHeader,children:[k.jsx("h3",{style:Te.offerTitle,children:e.title}),k.jsx("span",{style:d(l({},Te.statusBadge),{background:e.is_active?"#6b7c59":"#8b7355"}),children:e.is_active?"Ù†Ø´Ø·":"Ù…ØªÙˆÙ‚Ù"})]}),k.jsx("p",{style:Te.offerDesc,children:e.description}),k.jsxs("div",{style:Te.offerDetails,children:[e.discount_percentage&&k.jsxs("span",{style:Te.discountBadge,children:["Ø®ØµÙ… ",e.discount_percentage,"%"]}),e.category&&k.jsxs("span",{style:Te.categoryBadge,children:["ðŸ“¦ ",(t=e.category,{electronics:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",furniture:"Ø£Ø«Ø§Ø«",clothes:"Ù…Ù„Ø§Ø¨Ø³",books:"ÙƒØªØ¨",toys:"Ø£Ù„Ø¹Ø§Ø¨",other:"Ø£Ø®Ø±Ù‰"}[t]||t)]}),e.target_location&&k.jsxs("span",{style:Te.locationBadge,children:["ðŸ“ ",e.target_location]}),e.end_date&&k.jsxs("span",{style:Te.dateBadge,children:["â° ÙŠÙ†ØªÙ‡ÙŠ: ",new Date(e.end_date).toLocaleDateString("ar-EG")]})]}),k.jsxs("div",{style:Te.offerActions,children:[k.jsx("button",{className:"btn",style:{background:e.is_active?"#8b7355":"#6b7c59",color:"white",borderRadius:"20px"},onClick:()=>g(e.id,e.is_active),children:e.is_active?"Ø¥ÙŠÙ‚Ø§Ù":"ØªÙØ¹ÙŠÙ„"}),k.jsx("button",{className:"btn btn-danger",onClick:()=>h(e.id),children:"Ø­Ø°Ù"})]})]})]},e.id);var t})})]})}const Te={header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",flexWrap:"wrap",gap:"16px"},title:{fontSize:"32px",color:"#2d2d2d",margin:0,fontWeight:"600"},formCard:{marginBottom:"40px",padding:"32px"},formTitle:{fontSize:"24px",color:"#2d2d2d",marginBottom:"24px",fontWeight:"600"},field:{marginBottom:"20px",flex:1},row:{display:"flex",gap:"20px",flexWrap:"wrap"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#5d5d5d",fontSize:"14px"},submitBtn:{width:"100%",padding:"12px"},offersList:{display:"flex",flexDirection:"column",gap:"20px"},empty:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},offerCard:{display:"flex",gap:"24px",flexWrap:"wrap",padding:"24px"},offerImage:{width:"220px",height:"220px",objectFit:"cover",borderRadius:"16px",flexShrink:0},offerContent:{flex:1,minWidth:"300px"},offerHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px",gap:"16px",flexWrap:"wrap"},offerTitle:{fontSize:"22px",fontWeight:"600",color:"#2d2d2d",margin:0,flex:"1",minWidth:"200px"},statusBadge:{padding:"8px 16px",borderRadius:"20px",color:"white",fontSize:"13px",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0},offerDesc:{color:"#7a7a7a",marginBottom:"20px",lineHeight:"1.7",fontSize:"15px"},offerDetails:{display:"flex",gap:"12px",flexWrap:"wrap",marginBottom:"16px"},discountBadge:{background:"rgba(139, 115, 85, 0.1)",color:"#8b7355",padding:"8px 16px",borderRadius:"16px",fontSize:"14px",fontWeight:"600"},categoryBadge:{background:"rgba(107, 124, 89, 0.1)",color:"#556b2f",padding:"8px 16px",borderRadius:"16px",fontSize:"14px",fontWeight:"500"},locationBadge:{background:"rgba(107, 124, 89, 0.1)",color:"#556b2f",padding:"8px 16px",borderRadius:"16px",fontSize:"14px",fontWeight:"500"},dateBadge:{background:"rgba(139, 115, 85, 0.1)",color:"#8b7355",padding:"8px 16px",borderRadius:"16px",fontSize:"14px",fontWeight:"500"},offerActions:{display:"flex",gap:"12px"}};function Re(){const{profile:e}=le(),[t,n]=p.useState([]),i=f();p.useEffect(()=>{o();const t=ae.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},e=>{n(t=>[e.new,...t]),r()}).subscribe();return()=>{ae.removeChannel(t)}},[]);const r=()=>{try{new Audio("/notification-sound.mp3").play().catch(e=>{})}catch(e){}},o=()=>c(this,null,function*(){try{const{data:t,error:i}=yield ae.from("notifications").select("*, products(title, images, final_price)").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(i)throw i;n(t||[])}catch(t){}}),s=e=>c(this,null,function*(){try{const{error:t}=yield ae.from("notifications").update({read:!0}).eq("id",e);if(t)throw t;n(t=>t.map(t=>t.id===e?d(l({},t),{read:!0}):t)),window.dispatchEvent(new Event("notificationsUpdated"))}catch(t){}}),a=e=>{const t=new Date-new Date(e),n=Math.floor(t/6e4),i=Math.floor(t/36e5),r=Math.floor(t/864e5);return n<1?"Ø§Ù„Ø¢Ù†":n<60?`Ù…Ù†Ø° ${n} Ø¯Ù‚ÙŠÙ‚Ø©`:i<24?`Ù…Ù†Ø° ${i} Ø³Ø§Ø¹Ø©`:`Ù…Ù†Ø° ${r} ÙŠÙˆÙ…`},x=t.filter(e=>!e.read).length;return k.jsxs("div",{className:"container",children:[k.jsxs("div",{style:De.header,children:[k.jsx("h1",{style:De.title,children:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),x>0&&k.jsxs("button",{className:"btn",onClick:()=>c(this,null,function*(){try{const{error:t}=yield ae.from("notifications").update({read:!0}).eq("user_id",e.id).eq("read",!1);if(t)throw t;n(e=>e.map(e=>d(l({},e),{read:!0}))),window.dispatchEvent(new Event("notificationsUpdated")),alert("ØªÙ… ØªØ¹Ù„ÙŠÙ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø© âœ“")}catch(t){alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª")}}),style:De.markAllBtn,children:["âœ“ ØªØ¹Ù„ÙŠÙ… Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡ (",x,")"]})]}),0===t.length?k.jsx("div",{className:"card",style:De.empty,children:k.jsx("p",{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"})}):k.jsx("div",{style:De.notificationsList,children:t.map(e=>{return k.jsx("div",{className:"card",style:l(l({},De.notificationCard),e.read?{}:De.unreadCard),onClick:()=>(e=>{s(e.id),e.product_id&&i(`/product/${e.product_id}`)})(e),children:k.jsxs("div",{style:De.notificationContent,children:[k.jsx("div",{style:De.iconContainer,children:k.jsx("span",{style:De.icon,children:(t=e.type,{new_product:"ðŸ†•",product_approved:"âœ…",product_rejected:"âŒ",price_negotiation:"ðŸ¤",price_rejected:"âš ï¸",price_update:"ðŸ’°",negotiation:"ðŸ¤",approved:"âœ…",rejected:"âŒ",offer:"ðŸŽ‰"}[t]||"ðŸ“¢")})}),k.jsxs("div",{style:De.notificationBody,children:[k.jsx("p",{style:De.message,children:e.message}),e.products&&k.jsxs("div",{style:De.productPreview,children:[e.products.images&&e.products.images[0]&&k.jsx("img",{src:e.products.images[0],alt:e.products.title,style:De.productImage}),k.jsxs("div",{children:[k.jsx("p",{style:De.productTitle,children:e.products.title}),e.products.final_price&&k.jsxs("p",{style:De.productPrice,children:[e.products.final_price," Ø¬Ù†ÙŠÙ‡"]})]})]}),k.jsx("span",{style:De.time,children:a(e.created_at)})]}),!e.read&&k.jsx("div",{style:De.unreadDot})]})},e.id);var t})})]})}const De={header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px",flexWrap:"wrap",gap:"16px"},title:{fontSize:"32px",color:"#10b981",margin:0},markAllBtn:{fontSize:"14px",background:"#10b981",color:"white",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600",transition:"all 0.3s",whiteSpace:"nowrap"},empty:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},notificationsList:{display:"flex",flexDirection:"column",gap:"12px"},notificationCard:{cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",position:"relative"},unreadCard:{background:"#f0fdf4",borderLeft:"4px solid #10b981"},notificationContent:{display:"flex",gap:"16px",alignItems:"flex-start"},iconContainer:{flex:"0 0 50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",borderRadius:"50%"},icon:{fontSize:"24px"},notificationBody:{flex:"1"},message:{fontSize:"16px",color:"#1f2937",marginBottom:"8px",lineHeight:"1.5"},productPreview:{display:"flex",gap:"12px",alignItems:"center",padding:"12px",background:"white",borderRadius:"8px",marginBottom:"8px"},productImage:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"6px"},productTitle:{fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"4px"},productPrice:{fontSize:"14px",color:"#10b981",fontWeight:"600"},time:{fontSize:"12px",color:"#9ca3af"},unreadDot:{width:"10px",height:"10px",background:"#10b981",borderRadius:"50%",position:"absolute",top:"24px",right:"24px"}};function Pe(){const{id:e}=m(),t=f(),{profile:n}=le(),{approveProduct:i,rejectProduct:r,negotiateProduct:o}=he(),[s,a]=p.useState(null),[x,u]=p.useState(null),[g,h]=p.useState(null),[y,b]=p.useState(!1),[j,v]=p.useState(0),[w,S]=p.useState(!1),[_,C]=p.useState(""),[N,B]=p.useState("");p.useEffect(()=>{z()},[e]);const z=()=>c(this,null,function*(){try{const{data:t,error:i}=yield ae.from("products").select("*").eq("id",e).single();if(i)throw i;const{data:r}=yield ae.from("offers").select("*").eq("is_active",!0).eq("category",t.category);let o,s=null;if(r&&r.length>0&&(s=r.find(e=>e.discount_percentage&&(!e.end_date||new Date(e.end_date)>new Date))),h(s),"admin"===(null==n?void 0:n.role)){const{data:e,error:n}=yield ae.from("profiles").select("username, phone, location, email").eq("id",t.user_id).single();if(n)throw n;o=e}else{const{data:e,error:t}=yield ae.from("profiles").select("username, phone, location, email").eq("role","admin").limit(1).single();if(t)throw t;o=e}a(t),u(o)}catch(t){alert("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬")}}),W=e=>{v(e),b(!0)},I=e=>c(this,null,function*(){if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ"))try{yield i(s.id,e),alert("ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬"),t("/admin")}catch(n){alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬")}}),T=e=>({pending:"#f59e0b",approved:"#10b981",rejected:"#ef4444",awaiting_seller:"#3b82f6"}[e]||"#6b7280");return s?k.jsxs("div",{className:"container",children:[k.jsx("button",{className:"btn",onClick:()=>t(-1),style:Ae.backBtn,children:"â† Ø±Ø¬ÙˆØ¹"}),k.jsxs("div",{className:"card",style:Ae.productCard,children:[s.images&&s.images.length>0&&k.jsxs("div",{style:Ae.imageGallery,children:[k.jsx("div",{style:Ae.mainImage,children:k.jsx("img",{src:s.images[0],alt:s.title,style:Ae.mainImg,onClick:()=>W(0),loading:"lazy",onError:e=>{e.target.src="https://placehold.co/400x300/e2e8f0/64748b?text=Main+Image+Not+Found"}})}),s.images.length>1&&k.jsx("div",{style:Ae.thumbnails,children:s.images.map((e,t)=>k.jsx("img",{src:e,alt:`${s.title} ${t+1}`,style:Ae.thumbnail,onClick:()=>W(t),loading:"lazy",onError:e=>{e.target.src="https://placehold.co/100x100/e2e8f0/64748b?text=Thumb+Not+Found"}},t))})]}),k.jsxs("div",{style:Ae.details,children:[k.jsxs("div",{style:Ae.header,children:[k.jsx("h1",{style:Ae.title,children:s.title}),k.jsx("span",{style:d(l({},Ae.status),{background:T(s.status)+"20",color:T(s.status)}),children:(R=s.status,{pending:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",approved:"Ù…ØªØ§Ø­ Ù„Ù„Ø¨ÙŠØ¹",rejected:"Ù…Ø±ÙÙˆØ¶",awaiting_seller:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹"}[R]||R)})]}),k.jsx("p",{className:"product-description",children:s.description}),k.jsx("div",{style:Ae.priceSection,children:"recycle"===s.choice_type?k.jsxs("div",{style:Ae.recycleBox,children:[k.jsx("h3",{style:Ae.recycleTitle,children:"â™»ï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¯ÙˆÙŠØ±"}),s.recycle_idea&&k.jsx("p",{style:Ae.recycleIdea,children:s.recycle_idea})]}):k.jsx(k.Fragment,{children:g&&s.final_price?k.jsxs("div",{style:Ae.offerPriceBox,children:[k.jsxs("div",{style:Ae.offerBanner,children:["ðŸŽ‰ Ø¹Ø±Ø¶ Ø®Ø§Øµ: Ø®ØµÙ… ",g.discount_percentage,"%"]}),k.jsx("div",{style:Ae.offerTitle,children:g.title}),g.description&&k.jsx("p",{style:Ae.offerDesc,children:g.description}),k.jsxs("div",{style:Ae.priceComparison,children:[k.jsxs("div",{style:Ae.oldPriceBox,children:[k.jsx("span",{style:Ae.priceLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ:"}),k.jsxs("span",{style:Ae.oldPriceValue,children:[s.final_price," Ø¬Ù†ÙŠÙ‡"]})]}),k.jsxs("div",{style:Ae.newPriceBox,children:[k.jsx("span",{style:Ae.priceLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…:"}),k.jsxs("span",{style:Ae.newPriceValue,children:[Math.round(s.final_price*(1-g.discount_percentage/100))," Ø¬Ù†ÙŠÙ‡"]})]})]}),k.jsxs("div",{style:Ae.savings,children:["ÙˆÙØ± ",Math.round(s.final_price*(g.discount_percentage/100))," Ø¬Ù†ÙŠÙ‡! ðŸ’°"]}),g.end_date&&k.jsxs("div",{style:Ae.offerEndDate,children:["â° Ø§Ù„Ø¹Ø±Ø¶ ÙŠÙ†ØªÙ‡ÙŠ: ",new Date(g.end_date).toLocaleDateString("ar-EG")]})]}):s.final_price?k.jsxs("div",{style:Ae.priceBox,children:[k.jsx("span",{style:Ae.priceLabel,className:"price-label",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:"}),k.jsxs("span",{style:Ae.finalPrice,children:[s.final_price," Ø¬Ù†ÙŠÙ‡"]})]}):s.negotiated_price?k.jsxs("div",{style:Ae.priceBox,children:[k.jsx("span",{style:Ae.priceLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­:"}),k.jsxs("span",{style:Ae.negotiatedPrice,children:[s.negotiated_price," Ø¬Ù†ÙŠÙ‡"]})]}):k.jsxs("div",{style:Ae.priceBox,children:[k.jsx("span",{style:Ae.priceLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­:"}),k.jsxs("span",{style:Ae.suggestedPrice,children:[s.suggested_price," Ø¬Ù†ÙŠÙ‡"]})]})})}),k.jsxs("div",{style:Ae.infoGrid,children:[k.jsxs("div",{style:Ae.infoItem,children:[k.jsx("span",{className:"info-label",children:"Ø§Ù„Ø­Ø§Ù„Ø©:"}),k.jsx("span",{className:"info-value",children:s.condition})]}),k.jsxs("div",{style:Ae.infoItem,children:[k.jsx("span",{className:"info-label",children:"Ø§Ù„ÙØ¦Ø©:"}),k.jsxs("span",{className:"info-value",children:["electronics"===s.category&&"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª","furniture"===s.category&&"Ø£Ø«Ø§Ø«","clothes"===s.category&&"Ù…Ù„Ø§Ø¨Ø³","books"===s.category&&"ÙƒØªØ¨","toys"===s.category&&"Ø£Ù„Ø¹Ø§Ø¨","other"===s.category&&"Ø£Ø®Ø±Ù‰"]})]}),s.original_price&&k.jsxs("div",{style:Ae.infoItem,children:[k.jsx("span",{style:Ae.infoLabel,children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ:"}),k.jsxs("span",{style:Ae.infoValue,children:[s.original_price," Ø¬Ù†ÙŠÙ‡"]})]}),s.discount_percentage&&k.jsxs("div",{style:Ae.infoItem,children:[k.jsx("span",{style:Ae.infoLabel,children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ…:"}),k.jsxs("span",{style:Ae.infoValue,children:[s.discount_percentage,"%"]})]})]}),x&&k.jsxs("div",{style:Ae.sellerSection,children:[k.jsx("h3",{className:"section-title",children:"admin"===(null==n?void 0:n.role)?"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹":"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ (Ø¨ÙŠÙƒÙŠØ§)"}),k.jsxs("div",{style:Ae.sellerInfo,children:[k.jsxs("div",{style:Ae.sellerItem,children:[k.jsx("span",{className:"seller-label",children:"ðŸ‘¤ Ø§Ù„Ø§Ø³Ù…:"}),k.jsx("span",{className:"seller-value",children:x.username})]}),k.jsxs("div",{style:Ae.sellerItem,children:[k.jsx("span",{className:"seller-label",children:"ðŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹:"}),k.jsx("span",{className:"seller-value",children:x.location})]}),"approved"===s.status&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:Ae.sellerItem,children:[k.jsx("span",{className:"seller-label",children:"ðŸ“ž Ø§Ù„Ù‡Ø§ØªÙ:"}),k.jsx("span",{className:"seller-value",children:x.phone})]}),k.jsxs("div",{style:Ae.sellerItem,children:[k.jsx("span",{className:"seller-label",children:"ðŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯:"}),k.jsx("span",{className:"seller-value",children:x.email})]})]})]})]}),s.negotiation_note&&k.jsxs("div",{style:Ae.noteSection,children:[k.jsx("h3",{className:"section-title",children:"Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),k.jsx("p",{style:Ae.note,children:s.negotiation_note})]}),s.rejection_reason&&k.jsxs("div",{style:Ae.rejectionSection,children:[k.jsx("h3",{className:"section-title",children:"Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶"}),k.jsx("p",{style:Ae.rejection,children:s.rejection_reason})]}),"admin"===(null==n?void 0:n.role)&&"pending"===s.status&&"sell"===s.choice_type&&k.jsxs("div",{style:Ae.adminActions,children:[k.jsx("h3",{className:"section-title",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),k.jsxs("div",{style:Ae.actionButtons,children:[k.jsxs("button",{className:"btn btn-primary",onClick:()=>I(s.suggested_price),style:Ae.actionBtn,children:["Ù…ÙˆØ§ÙÙ‚Ø© (",s.suggested_price," Ø¬Ù†ÙŠÙ‡)"]}),k.jsx("button",{className:"btn btn-secondary",onClick:()=>{C(s.suggested_price||s.negotiated_price||""),B(""),S(!0)},style:Ae.actionBtn,children:"ØªÙØ§ÙˆØ¶"}),k.jsx("button",{className:"btn btn-danger",onClick:()=>c(this,null,function*(){const e=prompt("Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:");if(e)try{yield r(s.id,e),alert("ØªÙ… Ø±ÙØ¶ Ø§Ù„Ù…Ù†ØªØ¬"),t("/admin")}catch(n){alert("Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¶ Ø§Ù„Ù…Ù†ØªØ¬")}}),style:Ae.actionBtn,children:"Ø±ÙØ¶"})]})]})]})]}),w&&k.jsx("div",{style:Ae.modal,children:k.jsxs("div",{className:"card",style:Ae.modalContent,children:[k.jsx("h3",{style:Ae.modalTitle,children:"Ø§Ù„ØªÙØ§ÙˆØ¶ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø±"}),k.jsxs("p",{children:["Ø§Ù„Ù…Ù†ØªØ¬: ",s.title]}),k.jsxs("p",{children:["Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­: ",s.suggested_price," Ø¬Ù†ÙŠÙ‡"]}),k.jsxs("div",{style:Ae.field,children:[k.jsx("label",{style:Ae.label,children:"Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯:"}),k.jsx("input",{type:"number",className:"input",value:_,onChange:e=>C(e.target.value),max:"500",placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨"})]}),k.jsxs("div",{style:Ae.field,children:[k.jsx("label",{style:Ae.label,children:"Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ø¨Ø§Ø¦Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):"}),k.jsx("textarea",{className:"input",rows:"3",value:N,onChange:e=>B(e.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ø³Ø¹Ø± Ù…Ø±ØªÙØ¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¨Ø³Ø¨Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬"})]}),k.jsxs("div",{style:Ae.modalActions,children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>c(this,null,function*(){if(!_||_<=0)alert("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ­ÙŠØ­");else try{yield o(s.id,_,N),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ÙˆØ¶ Ù„Ù„Ø¨Ø§Ø¦Ø¹"),S(!1),z()}catch(e){alert("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ÙˆØ¶")}}),children:"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„Ø¨Ø§Ø¦Ø¹"}),k.jsx("button",{className:"btn",style:{background:"#10b981",color:"white"},onClick:()=>{S(!1),I(_)},children:"Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ø¨Ø§Ø´Ø±Ø©"}),k.jsx("button",{className:"btn btn-secondary",onClick:()=>S(!1),children:"Ø¥Ù„ØºØ§Ø¡"})]})]})}),y&&s.images&&k.jsx(me,{images:s.images,currentIndex:j,onClose:()=>b(!1),onNext:()=>v((j+1)%s.images.length),onPrev:()=>v((j-1+s.images.length)%s.images.length)})]}):k.jsx("div",{className:"container",children:k.jsxs("div",{className:"card",style:Ae.error,children:[k.jsx("h2",{children:"Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"}),k.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})});var R}const Ae={backBtn:{marginBottom:"20px"},productCard:{maxWidth:"1000px",margin:"0 auto",padding:"40px"},imageGallery:{marginBottom:"30px"},mainImage:{width:"100%",height:"500px",marginBottom:"24px",borderRadius:"24px",overflow:"hidden",cursor:"pointer",background:"#f5f5f0"},mainImg:{width:"100%",height:"100%",objectFit:"cover"},thumbnails:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"16px"},thumbnail:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"16px",cursor:"pointer",border:"2px solid transparent",transition:"all 0.3s ease",background:"#f5f5f0"},details:{display:"flex",flexDirection:"column",gap:"32px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px",flexWrap:"wrap"},title:{fontSize:"36px",fontWeight:"600",color:"#2d2d2d",margin:0,lineHeight:"1.3"},status:{padding:"10px 20px",borderRadius:"24px",fontSize:"14px",fontWeight:"500"},priceSection:{padding:"32px",background:"rgba(107, 124, 89, 0.05)",borderRadius:"24px",border:"1px solid rgba(107, 124, 89, 0.1)"},priceBox:{display:"flex",justifyContent:"space-between",alignItems:"center"},priceLabel:{fontSize:"18px",color:"#000000",fontWeight:"600"},finalPrice:{fontSize:"32px",fontWeight:"600",color:"#6b7c59"},negotiatedPrice:{fontSize:"28px",fontWeight:"600",color:"#8b7355"},suggestedPrice:{fontSize:"28px",fontWeight:"600",color:"#8b7355"},recycleBox:{textAlign:"center",padding:"20px"},recycleTitle:{fontSize:"26px",color:"#6b7c59",marginBottom:"16px",fontWeight:"600"},recycleIdea:{fontSize:"16px",color:"#7a7a7a",lineHeight:"1.8"},offerPriceBox:{background:"rgba(139, 115, 85, 0.08)",padding:"28px",borderRadius:"24px",border:"2px solid rgba(139, 115, 85, 0.2)"},offerBanner:{background:"#8b7355",color:"white",padding:"12px 24px",borderRadius:"20px",fontSize:"17px",fontWeight:"600",textAlign:"center",marginBottom:"16px"},offerTitle:{fontSize:"20px",fontWeight:"600",color:"#5d5d5d",marginBottom:"8px",textAlign:"center"},offerDesc:{fontSize:"14px",color:"#7a7a7a",marginBottom:"16px",textAlign:"center"},priceComparison:{display:"flex",justifyContent:"space-around",gap:"20px",marginBottom:"16px",flexWrap:"wrap"},oldPriceBox:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},oldPriceValue:{fontSize:"20px",color:"#9ca3af",textDecoration:"line-through",fontWeight:"600"},newPriceBox:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},newPriceValue:{fontSize:"32px",fontWeight:"600",color:"#6b7c59"},savings:{background:"#6b7c59",color:"white",padding:"14px",borderRadius:"16px",textAlign:"center",fontSize:"17px",fontWeight:"600",marginBottom:"12px"},offerEndDate:{textAlign:"center",fontSize:"14px",color:"#92400e",fontWeight:"600"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},infoItem:{padding:"20px",background:"rgba(107, 124, 89, 0.15)",borderRadius:"20px",display:"flex",flexDirection:"column",gap:"10px",border:"1px solid rgba(107, 124, 89, 0.2)"},infoLabel:{fontSize:"13px",color:"#000000",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"17px",color:"#000000",fontWeight:"600"},sellerSection:{padding:"28px",background:"rgba(107, 124, 89, 0.15)",borderRadius:"24px",border:"1px solid rgba(107, 124, 89, 0.25)"},sellerInfo:{display:"flex",flexDirection:"column",gap:"12px"},sellerItem:{display:"flex",justifyContent:"space-between",padding:"14px",background:"rgba(255, 255, 255, 0.8)",borderRadius:"16px"},noteSection:{padding:"28px",background:"rgba(139, 115, 85, 0.06)",borderRadius:"24px",border:"1px solid rgba(139, 115, 85, 0.15)"},note:{fontSize:"16px",color:"#5d5d5d",lineHeight:"1.7"},rejectionSection:{padding:"20px",background:"#fee2e2",borderRadius:"12px",border:"2px solid #ef4444"},rejection:{fontSize:"16px",color:"#991b1b",lineHeight:"1.6"},adminActions:{padding:"28px",background:"rgba(107, 124, 89, 0.08)",borderRadius:"24px",border:"1px solid rgba(107, 124, 89, 0.2)"},actionButtons:{display:"flex",gap:"12px",flexWrap:"wrap",marginTop:"16px"},actionBtn:{flex:"1",minWidth:"150px"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},modalTitle:{fontSize:"22px",marginBottom:"20px",color:"#2d2d2d",fontWeight:"600"},field:{marginTop:"16px",marginBottom:"16px"},label:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#374151"},modalActions:{display:"flex",gap:"12px",marginTop:"20px",flexWrap:"wrap"},error:{textAlign:"center",padding:"60px 20px"}};function Le(){const{user:e}=le(),[t,n]=p.useState("checking"),[i,r]=p.useState("");return p.useEffect(()=>{(()=>{c(this,null,function*(){if(!e)return n("error"),void r("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");try{n("updating"),r("Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª...");const{data:t,error:i}=yield ae.from("profiles").update({role:"admin"}).eq("id",e.id).select();if(i)return n("error"),void r(`Ø®Ø·Ø£: ${i.message}`);n("success"),r("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒÙ…Ø¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡Ùƒ..."),setTimeout(()=>{window.location.href="/admin"},2e3)}catch(t){n("error"),r(`Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ${t.message}`)}})})()},[e]),k.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:k.jsxs("div",{className:"card",style:l({padding:"40px",textAlign:"center",maxWidth:"500px"},(()=>{switch(t){case"success":return{color:"#10b981",background:"#f0fdf4"};case"error":return{color:"#ef4444",background:"#fee2e2"};case"updating":return{color:"#f59e0b",background:"#fef3c7"};default:return{color:"#6b7280",background:"#f3f4f6"}}})()),children:[k.jsxs("div",{style:{fontSize:"60px",marginBottom:"20px"},children:["checking"===t&&"ðŸ”","updating"===t&&"ðŸ”„","success"===t&&"âœ…","error"===t&&"âŒ"]}),k.jsxs("h2",{style:{marginBottom:"16px"},children:["checking"===t&&"Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª","updating"===t&&"ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª","success"===t&&"ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­","error"===t&&"Ø­Ø¯Ø« Ø®Ø·Ø£"]}),k.jsx("p",{style:{fontSize:"18px",marginBottom:"24px"},children:i}),"error"===t&&k.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[k.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©"}),k.jsx("button",{className:"btn btn-secondary",onClick:()=>window.location.href="/",children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})]})})}function Ee(){const{profile:e,signOut:t}=le(),n=f(),[i,r]=p.useState(0),[o,s]=p.useState(!1);p.useEffect(()=>{},[e]),p.useEffect(()=>{if(null==e?void 0:e.id){"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission(),a();const t=ae.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},e=>{var t;d();const n=(null==(t=e.new)?void 0:t.message)||"Ù„Ø¯ÙŠÙƒ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯!";l(n),a()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},e=>{a()}).subscribe(),n=()=>{a()};return window.addEventListener("notificationsUpdated",n),()=>{t.unsubscribe(),window.removeEventListener("notificationsUpdated",n)}}},[e]);const a=()=>c(this,null,function*(){if(null==e?void 0:e.id)try{const{count:t,error:n}=yield ae.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("read",!1);n||r(t||0)}catch(t){}}),l=(e="Ù„Ø¯ÙŠÙƒ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯! Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ Ù…ØªØ§Ø­ ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ")=>{"Notification"in window&&"granted"===Notification.permission&&new Notification("Ø¨ÙŠÙƒÙŠØ§ - Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯",{body:e,icon:"/favicon.ico",badge:"/favicon.ico",tag:"bekya-notification",requireInteraction:!1})},d=()=>{try{const e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(()=>{x()})}catch(e){x()}},x=()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.value=800,t.type="sine",n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),t.start(e.currentTime),t.stop(e.currentTime+.15),setTimeout(()=>{const t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.value=1e3,t.type="sine",n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),t.start(e.currentTime),t.stop(e.currentTime+.15)},100)}catch(e){}};return k.jsx("nav",{style:qe.nav,children:k.jsxs("div",{className:"container",style:qe.container,children:[k.jsx(h,{to:"/",style:qe.logo,children:"Ø¨ÙŠÙƒÙŠØ§ ðŸ›’"}),k.jsxs("div",{style:qe.rightSection,children:[k.jsxs(h,{to:"/notifications",style:qe.notificationLink,children:[k.jsx("span",{style:qe.bellIcon,children:"ðŸ””"}),i>0&&k.jsx("span",{style:qe.badge,children:i})]}),k.jsx("button",{onClick:()=>{s(!o)},className:"navbar-hamburger",style:qe.hamburger,"aria-label":"Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",children:o?"âœ•":"â˜°"})]}),k.jsxs("div",{className:"navbar-menu "+(o?"menu-open":"menu-closed"),style:qe.menu,children:[k.jsx(h,{to:"/",style:qe.link,onClick:()=>s(!1),children:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"}),k.jsx(h,{to:"/add-product",style:qe.link,onClick:()=>s(!1),children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬"}),k.jsx(h,{to:"/profile",style:qe.link,onClick:()=>s(!1),children:"Ø­Ø³Ø§Ø¨ÙŠ"}),"admin"===(null==e?void 0:e.role)&&k.jsxs(k.Fragment,{children:[k.jsx(h,{to:"/admin",style:qe.link,onClick:()=>s(!1),children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),k.jsx(h,{to:"/admin/offers",style:qe.link,onClick:()=>s(!1),children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶"})]}),k.jsx("button",{onClick:()=>c(this,null,function*(){try{yield t(),n("/login")}catch(e){n("/login")}}),style:qe.logoutBtn,type:"button",children:"ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]})]})})}const qe={nav:{background:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",boxShadow:"0 2px 20px rgba(31, 38, 135, 0.1)",marginBottom:"32px",position:"sticky",top:0,zIndex:100,borderBottom:"1px solid rgba(107, 124, 89, 0.1)"},container:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 28px",position:"relative"},logo:{fontSize:"28px",fontWeight:"800",background:"linear-gradient(135deg, #6b7c59 0%, #556b2f 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textDecoration:"none",zIndex:101,letterSpacing:"-0.5px",transition:"all 0.3s ease"},rightSection:{display:"flex",alignItems:"center",gap:"24px",zIndex:101},hamburger:{display:"none",fontSize:"28px",background:"none",border:"none",color:"#6b7c59",cursor:"pointer",padding:"8px",zIndex:101,transition:"all 0.3s ease"},menu:{display:"flex",gap:"28px",alignItems:"center"},link:{color:"#718096",textDecoration:"none",fontWeight:"600",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap",fontSize:"15px",position:"relative",padding:"8px 0"},notificationLink:{position:"relative",color:"#718096",textDecoration:"none",display:"flex",alignItems:"center",padding:"10px",transition:"all 0.3s ease",borderRadius:"12px"},bellIcon:{fontSize:"22px"},badge:{position:"absolute",top:"2px",right:"2px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"700",border:"2px solid white",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.4)",animation:"pulse 2s ease-in-out infinite"},logoutBtn:{padding:"10px 24px",background:"linear-gradient(135deg, #8b7355 0%, #6d5a42 100%)",color:"white",borderRadius:"20px",fontWeight:"600",whiteSpace:"nowrap",fontSize:"14px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(139, 115, 85, 0.3)",border:"none"}};if("undefined"!=typeof window){const e=document.createElement("style");e.textContent="\n    .navbar-hamburger {\n      display: none;\n    }\n    \n    @media (max-width: 768px) {\n      .navbar-hamburger {\n        display: block !important;\n      }\n      \n      .navbar-menu {\n        position: absolute;\n        top: 100%;\n        left: 0;\n        right: 0;\n        background: white;\n        flex-direction: column;\n        padding: 16px;\n        box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n        gap: 12px !important;\n        align-items: stretch !important;\n        transition: all 0.3s ease;\n      }\n      \n      .navbar-menu.menu-closed {\n        display: none !important;\n      }\n      \n      .navbar-menu.menu-open {\n        display: flex !important;\n      }\n      \n      .navbar-menu a,\n      .navbar-menu button {\n        width: 100%;\n        text-align: center;\n        padding: 12px !important;\n        display: block;\n      }\n    }\n  ",document.head.appendChild(e)}function $e(){const{user:e,profile:t,loadUser:n,isLoading:i}=le();return p.useEffect(()=>{const e=()=>{const e=window.location.pathname;"/login"!==e&&"/signup"!==e&&localStorage.setItem("lastVisitedPage",e)};return e(),window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]),p.useEffect(()=>{n();const{data:{subscription:e}}=ae.auth.onAuthStateChange(()=>{n()});return()=>{null==e||e.unsubscribe()}},[n]),i?null:k.jsxs(y,{basename:"/bekya2.1",children:[e&&k.jsx(Ee,{}),k.jsxs(b,{children:[k.jsx(j,{path:"/login",element:e?k.jsx(v,{to:"/"}):k.jsx(pe,{})}),k.jsx(j,{path:"/signup",element:e?k.jsx(v,{to:"/"}):k.jsx(ue,{})}),k.jsx(j,{path:"/",element:e?k.jsx(ve,{}):k.jsx(v,{to:"/login"})}),k.jsx(j,{path:"/browse",element:e?k.jsx(Se,{}):k.jsx(v,{to:"/login"})}),k.jsx(j,{path:"/add-product",element:e?k.jsx(Ce,{}):k.jsx(v,{to:"/login"})}),k.jsx(j,{path:"/profile",element:e?k.jsx(Ne,{}):k.jsx(v,{to:"/login"})}),k.jsx(j,{path:"/notifications",element:e?k.jsx(Re,{}):k.jsx(v,{to:"/login"})}),k.jsx(j,{path:"/product/:id",element:e?k.jsx(Pe,{}):k.jsx(v,{to:"/login"})}),k.jsx(j,{path:"/admin",element:e&&"admin"===(null==t?void 0:t.role)?k.jsx(ze,{}):k.jsx(v,{to:"/"})}),k.jsx(j,{path:"/admin/offers",element:e&&"admin"===(null==t?void 0:t.role)?k.jsx(Ie,{}):k.jsx(v,{to:"/"})}),k.jsx(j,{path:"/set-admin",element:e?k.jsx(Le,{}):k.jsx(v,{to:"/login"})})]})]})}function Oe(){return k.jsx(de,{children:k.jsx($e,{})})}document.body.classList.add("netflix-theme"),N.createRoot(document.getElementById("root")).render(k.jsx(g.StrictMode,{children:k.jsx(Oe,{})}))}},function(){return _||(0,S[i(S)[0]])((_={exports:{}}).exports,_),_.exports});export default C();
